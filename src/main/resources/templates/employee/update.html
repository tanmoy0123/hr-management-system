<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">
<head>
    <title>Update Employee</title>
</head>
<body>
<div layout:fragment="content">
    <div class="main_container">
        <div class="col-md-12">
            <div class="right_col" role="main">
                <div class="col-12">
                    <div class="x_panel">
                        <div class="x_title">
                            <h2><b>Update Employee</b></h2>
                            <div style="text-align: right;">
                                <a th:href="@{/employee}" class="btn btn-outline-success btn-sm">Employee Lists</a>
                            </div>
                            <div class="clearfix"></div>
                        </div>

                        <!--Step Navigation -->

                        <div class="nav nav-tabs d-flex flex-nowrap overflow-auto" id="wizardTabs" role="tablist">
                            <button class="nav-link active" id="step1-tab" data-bs-toggle="tab" data-bs-target="#step1"
                                    role="tab" aria-controls="step1" aria-selected="true">
                                Employee Basic Information
                            </button>
                            <button class="nav-link" id="step2-tab" data-bs-toggle="tab" data-bs-target="#step2"
                                    role="tab" aria-controls="step2" aria-selected="false" th:if="${employee}">
                                Contact Information
                            </button>

                            <button class="nav-link" id="step3-tab" data-bs-toggle="tab" data-bs-target="#step3"
                                    role="tab" aria-controls="step3" aria-selected="false"
                                    th:if="${employee.contactInformationList}">
                                Education
                            </button>

                            <button class="nav-link" id="step4-tab" data-bs-toggle="tab" data-bs-target="#step4"
                                    role="tab" aria-controls="step4" aria-selected="false"
                                    th:if="${employee.educationList}">
                                Experience
                            </button>
                            <button class="nav-link" id="step5-tab" data-bs-toggle="tab" data-bs-target="#step5"
                                    role="tab" aria-controls="step5" aria-selected="false"
                                    th:if="${employee.previousExperienceList}">
                                Family Information
                            </button>


                            <button class="nav-link" id="step6-tab" data-bs-toggle="tab" data-bs-target="#step6"
                                    role="tab" aria-controls="step6" aria-selected="false"
                                    th:if="${#lists.isEmpty(employee.medicalList) == false or #lists.isEmpty(employee.policeClearanceList) == false}">
                                Clearance
                            </button>

                            <button class="nav-link" id="step7-tab" data-bs-toggle="tab" data-bs-target="step7"
                                    role="tab" aria-controls="step7" aria-selected="false"
                                    th:if="${#lists.isEmpty(employee.addressList)== false or #lists.isEmpty(employee.addressList)==false}">
                                Address
                            </button>

                        </div>

                        <!------------------- Tab 1: Employee Basic Information Start---------------------------------->

                        <form th:action="@{/employee/update/{id}(id=${employee.id})}" method="post"
                              th:object="${employee}" id="employeeForm"
                              enctype="multipart/form-data">
                            <!--                            <input type="hidden" th:field="*{activeStatus}" value="1" />-->
                            <input type="hidden" name="activeStatus" value="1"/>


                            <div class="tab-content" id="wizardTabContent">
                                <!-- Tab 1: Employee Basic Information Start -->
                                <div class="tab-pane fade show active" id="step1" role="tabpanel"
                                     aria-labelledby="step1-tab">
                                    <!--                                    <h5 class="mt-3 text-center">Employee Basic Information</h5>-->
                                    <div class="form-group col-md-12">
                                        <div class="row">
                                            <div class="form-group col-md-4">
                                                <label for="firstName">First Name</label>
                                                <input type="text" th:field="*{firstName}" class="form-control"
                                                       placeholder="Enter First Name" id="firstName" required/>
                                                <div class="text-danger" id="firstNameError"></div>
                                            </div>
                                            <div class="form-group col-md-4">
                                                <label for="lastName">Last Name</label>
                                                <input type="text" id="lastName" th:field="*{lastName}"
                                                       class="form-control"
                                                       placeholder="Enter last name" required/>
                                            </div>
                                            <div class="form-group col-md-4">
                                                <label for="familyName">Family Name</label>
                                                <input type="text" id="familyName" class="form-control"
                                                       placeholder="Enter family name" th:field="*{familyName}"
                                                       required/>
                                            </div>
                                        </div>

                                    </div>

                                    <div class="form-group col-md-12">
                                        <div class="row">
                                            <div class="form-group col-md-4">
                                                <label for="fathersName">Father's Name</label>
                                                <input type="text" id="fathersName" th:field="*{fathersName}"
                                                       class="form-control"
                                                       placeholder="Enter father's name" required/>
                                            </div>
                                            <div class="form-group col-md-4">
                                                <label for="mothersName">Mother's Name</label>
                                                <input type="text" id="mothersName" th:field="*{mothersName}"
                                                       class="form-control"
                                                       placeholder="Enter mother's name" required/>
                                            </div>
                                            <div class="form-group col-md-4">
                                                <label for="employeeDob">Date of Birth</label>
                                                <input type="date" id="employeeDob" class="form-control"
                                                       th:field="*{dob}" required/>
                                            </div>
                                        </div>


                                    </div>

                                    <div class="form-group col-md-12">
                                        <div class="row">
                                            <div class="form-group col-md-4">
                                                <label for="religion">Religion</label>
                                                <input type="text" id="religion" class="form-control"
                                                       th:field="*{religion}" required
                                                       placeholder="Enter Religion"/>
                                            </div>


                                            <!---------------Blood Group--------------------->
                                            <div class="form-group col-md-4">
                                                <label for="bloodGroup">Blood Group</label>
                                                <select class="form-control" required placeholder="Enter Blood Group"
                                                        th:field="*{bloodGroup}"
                                                        id="bloodGroup">
                                                    <option value="" selected>
                                                        Select blood group
                                                    </option>
                                                    <option value="A+">A+</option>
                                                    <option value="A-">A-</option>
                                                    <option value="B+">B+</option>
                                                    <option value="B-">B-</option>
                                                    <option value="AB+">AB+</option>
                                                    <option value="AB-">AB-</option>
                                                    <option value="O+">O+</option>
                                                    <option value="O-">O-</option>
                                                </select>
                                                <div class="invalid-feedback">
                                                    Please select a blood group.
                                                </div>
                                            </div>


                                            <div class="form-group col-md-4">
                                                <label for="gender">Gender</label>
                                                <select id="gender" th:field="*{gender}"
                                                        class="form-control" required>
                                                    <option value="" disabled selected>Select Gender</option>
                                                    <option value="male">Male</option>
                                                    <option value="female">Female</option>
                                                    <option value="others">Others</option>
                                                </select>
                                                <div class="text-danger" th:if="${#fields.hasErrors('gender')}"
                                                     th:errors="*{gender}"></div>
                                            </div>
                                        </div>

                                    </div>


                                    <div class="form-group col-md-12">
                                        <div class="row">
                                            <div class="form-group col-md-4">
                                                <label for="nationality">Nationality</label>
                                                <input type="text" class="form-control" id="nationality"
                                                       th:field="*{nationality}"
                                                       placeholder="Enter nationality" required/>
                                            </div>


                                            <div class="form-group col-md-3">
                                                <label for="maritalStatus">Marital Status</label>
                                                <select id="maritalStatus" th:field="*{maritalStatus}"
                                                        class="form-control" required>
                                                    <option value="" disabled selected>Select Marital Status</option>
                                                    <option value="married">Married</option>
                                                    <option value="unmarried">Unmarried</option>
                                                </select>
                                                <div class="text-danger" th:if="${#fields.hasErrors('maritalStatus')}"
                                                     th:errors="*{maritalStatus}"></div>
                                            </div>

                                        </div>
                                    </div>


                                    <div class="form-group col-md-12">
                                        <div class="row">
                                            <div class="form-group col-md-3">
                                                <!-- Photo Display -->
                                                <label type="button" data-toggle="modal"
                                                       data-target=".bd-example-modal-lg">Current Photo: <span
                                                        class="text-primary font-weight-bold">View Employee Photo</span></label>
                                                <input type="file" id="photo" name="photo" class="form-control"
                                                       accept=".jpeg, .jpg, .png">
                                            </div>

                                            <!-- Modal for Photo Display-->
                                            <div class="modal fade bd-example-modal-lg" tabindex="-1" role="dialog"
                                                 aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                                                <div class="modal-dialog modal-sm modal-dialog-centered"
                                                     role="document">
                                                    <div class="modal-content modalContent">
                                                        <div class="modal-header">
                                                            <h5 class="modal-title text-black-50"
                                                                id="exampleModalCenterTitle">Photo</h5>
                                                            <button type="button" class="close" data-dismiss="modal"
                                                                    aria-label="Close">
                                                                <span aria-hidden="true" cursor="pointer">&times;</span>
                                                            </button>
                                                        </div>
                                                        <div class="modal-body">
                                                            <div class="w-100">
                                                                <img th:src="@{${employee.photoUrl}}" class="img-fluid"
                                                                     th:alt="${employee.photoUrl}">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="d-flex justify-content-between mt-3">
                                            <button type="button" class="btn btn-primary next-button" data-next="step2">
                                                Next
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <!------------------- Tab 1: Employee Basic Information End---------------------------->


                                <!------------------- Tab 2: Contact  Information Start------------------------------->
                                <div class="tab-pane fade" id="step2" role="tabpanel" aria-labelledby="step2-tab">
                                    <!--                                    <h6 style="text-align: center; color: #3030c9;"><b>Education</b></h6>-->
                                    <div class="form-group col-md-12 contactDetails">
                                        <!-- Dynamic Rows Container -->
                                        <div class="row contactRow"
                                             data-th-each="contactInformation, iterStat : ${employee.contactInformationList}">
                                            <div class="form-group col-md-12">
                                                <div class="row">
                                                    <div class="form-group col-md-4"><label
                                                            th:for="'contactInformation_' + ${iterStat.index} + '_idType'">Identity
                                                        Type</label>
                                                        <select th:field="*{contactInformationList[__${iterStat.index}__].idType}"
                                                                th:id="'contactInformation_' + ${iterStat.index} + '_idType'"
                                                                class="form-control" required>
                                                            <option value="" disabled selected>Select ID Type</option>
                                                            <option value="NID"
                                                                    th:selected="*{contactInformationList[__${iterStat.index}__].idType == 'nid'}">
                                                                NID
                                                            </option>
                                                            <option value="PASSP"
                                                                    th:selected="*{contactInformationList[__${iterStat.index}__].idType == 'passp'}">
                                                                PASSP
                                                            </option>
                                                            <option value="BRC"
                                                                    th:selected="*{contactInformationList[__${iterStat.index}__].idType == 'brc'}">
                                                                BRC
                                                            </option>
                                                        </select>
                                                    </div>
                                                    <!-- Reference ID Field -->
                                                    <div class="form-group col-md-4"><label
                                                            th:for="'contactInformation_' + ${iterStat.index} + '_refId'">Reference
                                                        ID</label>
                                                        <input type="text"
                                                               th:field="*{contactInformationList[__${iterStat.index}__].refId}"
                                                               class="form-control"
                                                               th:id="'contactInformation_' + ${iterStat.index} + '_refId'"
                                                               placeholder="Enter Reference ID" required/>
                                                    </div>
                                                    <!-- Reference Documents Field -->
                                                    <div class="form-group col-md-4">
                                                        <label type="button" data-toggle="modal"
                                                               data-target=".bd-example-modalRefDoc">Current Reference
                                                            Document: <span
                                                                    class="text-primary font-weight-bold">View Reference Document</span></label>
                                                        <input type="file"
                                                               name="contactInformationRefDocs"
                                                               class="form-control"
                                                               accept=".jpeg, .jpg, .png, .pdf, .doc, .docx"
                                                        />
                                                    </div>

                                                    <!--Modal for Nid Document-->
                                                    <div class="modal bg-transparent fade bd-example-modalRefDoc"
                                                         tabindex="-1"
                                                         role="dialog"
                                                         aria-labelledby="exampleModalCenterTitle9" aria-hidden="true">
                                                        <div class="modal-dialog modal-sm modal-dialog-centered"
                                                             role="document">
                                                            <div class="modal-content modalContent">
                                                                <div class="modal-header">
                                                                    <h5 class="modal-title text-black-50"
                                                                        id="exampleModalCenterTitle9">Reference
                                                                        Documents</h5>
                                                                    <button type="button" class="close"
                                                                            data-dismiss="modal"
                                                                            aria-label="Close">
                                                                        <span aria-hidden="true" cursor="pointer">&times;</span>
                                                                    </button>
                                                                </div>
                                                                <div class="modal-body">
                                                                    <div class="w-100">
                                                                        <img th:src="'data:image/jpeg;base64,' + ${contactInformationRefDocs}"
                                                                             th:alt="${contactInformationRefDocs}"
                                                                             class="img-fluid"/>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <!-- Issue Date Field -->
                                                    <div class="form-group col-md-4"><label
                                                            th:for="'contactInformation_' + ${iterStat.index} + '_issDate'">Issue
                                                        Date</label>
                                                        <input type="date"
                                                               th:field="*{contactInformationList[__${iterStat.index}__].issDate}"
                                                               class="form-control"
                                                               th:id="'contactInformation_' + ${iterStat.index} + '_issDate'"
                                                               required/></div>
                                                    <!-- Issue Country Field -->
                                                    <div class="form-group col-md-4"><label
                                                            th:for="'contactInformation_' + ${iterStat.index} + '_issCountry'">Issue
                                                        Country</label>
                                                        <input type="text"
                                                               th:field="*{contactInformationList[__${iterStat.index}__].issCountry}"
                                                               class="form-control"
                                                               th:id="'contactInformation_' + ${iterStat.index} + '_issCountry'"
                                                               placeholder="Enter Country" required/>
                                                    </div>

                                                    <!-- Issue Place Field -->
                                                    <div class="form-group col-md-4">
                                                        <label th:for="'contactInformation_' + ${iterStat.index} + '_issPlace'">Issue
                                                            Place</label> <input type="text"
                                                                                 th:field="*{contactInformationList[__${iterStat.index}__].issPlace}"
                                                                                 class="form-control"
                                                                                 th:id="'contactInformation_' + ${iterStat.index} + '_issPlace'"
                                                                                 placeholder="Enter Place"
                                                                                 required/></div>
                                                    <!-- Expiry Date Field -->
                                                    <div class="form-group col-md-4"><label
                                                            th:for="'contactInformation_' + ${iterStat.index} + '_expDate'">Expiry
                                                        Date</label>
                                                        <input type="date"
                                                               th:field="*{contactInformationList[__${iterStat.index}__].expDate}"
                                                               class="form-control"
                                                               th:id="'contactInformation_' + ${iterStat.index} + '_expDate'"/>
                                                    </div>

                                                    <!--Email Field -->
                                                    <div class="form-group col-md-4">
                                                        <label th:for="'contactInfomation_'+${iterStat.index}+'_email'">Email</label>
                                                        <input type="email"
                                                               th:field="*{contactInformationList[__${iterStat.index}__].email}"
                                                               class="form-control"
                                                               th:id="'contactInfomation_'+${iterStat.index}+'_email'"
                                                               required/>
                                                    </div>

                                                    <!--Business Email Field -->
                                                    <div class="form-group col-md-4">
                                                        <label th:for="'contactInfomation_'+${iterStat.index}+'_busEmail'">Business
                                                            Email</label>
                                                        <input type="email"
                                                               th:field="*{contactInformationList[__${iterStat.index}__].busnEmail}"
                                                               class="form-control"
                                                               th:id="'contactInfomation_'+${iterStat.index}+'_busEmail'"
                                                               required/>
                                                    </div>

                                                    <!--Social Media Link-->
                                                    <div class="form-group col-md-4">
                                                        <label th:for="'contactInfomation_'+${iterStat.index}+'_smediaLink'">Social
                                                            Media Link</label>
                                                        <input type="text"
                                                               th:field="*{contactInformationList[__${iterStat.index}__].smediaLink}"
                                                               class="form-control"
                                                               th:id="'contactInfomation_'+${iterStat.index}+'_smediaLink'"
                                                               required/>
                                                    </div>
                                                    <!-- National ID Field -->
                                                    <!--                                                    <div class="form-group col-md-4">-->
                                                    <!--                                                        <label th:for="'contactInfomation_'+${iterStat.index}+'_nid'">NID</label>-->
                                                    <!--                                                        <input type="text" th:field="*{contactInformationList[__${iterStat.index}__].nid}" class="form-control"-->
                                                    <!--                                                               th:id="'contactInfomation_'+${iterStat.index}+'_nid'"-->
                                                    <!--                                                               required/>-->
                                                    <!--                                                    </div>-->
                                                    <!-- Phone Number Field -->
                                                    <div class="form-group col-md-4">
                                                        <label th:for="'contactInfomation_'+${iterStat.index}+'phNum'">Phone
                                                            Number</label>
                                                        <div class="input-group">
                                                            <div class="input-group-prepend"><span
                                                                    class="input-group-text">+88</span>
                                                            </div>
                                                            <input type="tel" class="form-control"
                                                                   th:field="*{contactInformationList[__${iterStat.index}__].phNum}"
                                                                   th:id="'contactInfomation_'+${iterStat.index}+'phNum'"
                                                                   placeholder="Enter phone number" required/></div>
                                                    </div>
                                                    <!-- Alternative Phone Number Field -->
                                                    <div class="form-group col-md-4">
                                                        <label th:for="'contactInfomation_'+${iterStat.index}+'altphNum'">
                                                            Alternative Phone Number</label>
                                                        <div class="input-group">
                                                            <div class="input-group-prepend"><span
                                                                    class="input-group-text">+88</span>
                                                            </div>
                                                            <input type="tel" class="form-control"
                                                                   th:field="*{contactInformationList[__${iterStat.index}__].altphNum}"
                                                                   th:id="'contactInfomation_'+${iterStat.index}+'altphNum'"
                                                                   placeholder="Enter phone number" required/>
                                                        </div>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>


                                        <!-- Navigation Buttons -->
                                        <div class="row mt-3">
                                            <div class="d-flex justify-content-between w-100">
                                                <button type="button" class="btn btn-secondary prev-button"
                                                        data-prev="step1">Previous
                                                </button>
                                                <button type="button" class="btn btn-primary next-button"
                                                        data-next="step3">
                                                    Next
                                                </button>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                                <!------------------- Tab 2: Contact Information End--------------------------------->

                                <!------------------- Tab 3: Education Information Start ------------------------------->
                                <div class="tab-pane fade" id="step3" role="tabpanel" aria-labelledby="step3-tab">
                                    <div class="form-group col-md-12 educationDetails">
                                        <!-- Dynamic Rows Container -->
                                        <div class="row educationRow"
                                             data-th-each="education, iterStat : ${employee.educationList}">
                                            <!-- Education Level Dropdown -->
                                            <div class="form-group col-md-4">
                                                <label th:for="'educationList[' + ${iterStat.index} + '].levelOfEducation'">Education
                                                    Level</label>
                                                <select
                                                        th:id="'education[' + ${iterStat.index} + '].levelOfEducation'"
                                                        th:name="'educationList[' + ${iterStat.index} + '].levelOfEducation'"
                                                        th:field="*{educationList[__${iterStat.index}__].levelOfEducation}"
                                                        class="form-control levelOfEducation"
                                                        onchange="getExamTitle(this.id)" required>
                                                    <option th:value="*{educationList[__${iterStat.index}__].levelOfEducation}"
                                                            th:text="*{educationList[__${iterStat.index}__].levelOfEducation}"
                                                            selected class="selected"></option>
                                                    <option value="">Select Education Level</option>
                                                </select>
                                            </div>

                                            <!-- Exam Degree Title Dropdown -->
                                            <div class="form-group col-md-4">
                                                <label th:for="'educationList[' + ${iterStat.index} + '].examDegreeTitle'">Exam/Degree
                                                    Title</label>
                                                <select
                                                        th:id="'educationList[' + ${iterStat.index} + '].examDegreeTitle'"
                                                        th:name="'educationList[' + ${iterStat.index} + '].examDegreeTitle'"
                                                        th:field="*{educationList[__${iterStat.index}__].examDegreeTitle}"
                                                        class="form-control examDegreeTitle"
                                                        required>
                                                    <option th:value="*{educationList[__${iterStat.index}__].examDegreeTitle}"
                                                            th:text="*{educationList[__${iterStat.index}__].examDegreeTitle}"
                                                            selected class="selected"></option>
                                                    <option value="">Select Exam Degree Title</option>
                                                    >
                                                </select>
                                            </div>

                                            <!-- University Dropdown -->
                                            <div class="form-group col-md-4">
                                                <label th:for="'educationList[' + ${iterStat.index} + '].boardUniversity'">Board/University/Institute</label>
                                                <select th:id="'educationList[' + ${iterStat.index} + '].boardUniversity'"
                                                        th:name="'educationList[' + ${iterStat.index} + '].boardUniversity'"
                                                        th:field="*{educationList[__${iterStat.index}__].boardUniversity}"
                                                        class="form-control universityDropdown" required
                                                        onchange="getSchoolCollege(this.id)">
                                                    <option th:value="${education.boardUniversity}"
                                                            th:text="${education.boardUniversity}" class="selected"
                                                            selected></option>
                                                    <option value="">Select University/Board/Institute</option>
                                                    <option th:each="university : ${universities}"
                                                            th:value="${university.universityCode}"
                                                            th:text="${university.universityName}">
                                                    </option>
                                                </select>
                                            </div>

                                            <!-- School/College Dropdown -->
                                            <div class="form-group col-md-3">
                                                <label th:for="'educationList[' + ${iterStat.index} + '].schoolCollege'">School/College</label>
                                                <select th:id="'educationList[' + ${iterStat.index} + '].schoolCollege'"
                                                        th:name="'educationList[' + ${iterStat.index} + '].schoolCollege'"
                                                        th:field="*{educationList[__${iterStat.index}__].schoolCollege}"
                                                        class="form-control schoolCollegeDropdown">
                                                    <option th:value="${education.schoolCollege}"
                                                            th:text="${education.schoolCollege}"
                                                            class="selected"></option>
                                                    <option value="">Select School/College</option>
                                                </select>
                                            </div>

                                            <!--06-02-2025-->
                                            <!-- Passing Year Dropdown-->
                                            <div class="form-group col-md-3">
                                                <label th:for="'educationList[' + ${iterStat.index} + '].passingYear'">Passing
                                                    Year</label>
                                                <select th:id="'educationList[' + ${iterStat.index} + '].passingYear'"
                                                        th:name="'educationList[' + ${iterStat.index} + '].passingYear'"
                                                        th:field="*{educationList[__${iterStat.index}__].passingYear}"
                                                        class="form-control passingYearDropdown"
                                                        onchange="getResultType(this.id)" required
                                                        th:data-passingYear="*{educationList[__${iterStat.index}__].passingYear}">
                                                </select>
                                            </div>


                                            <!-- Group Dropdown -->
                                            <div class="form-group col-md-3">
                                                <label th:for="'educationList[' + ${iterStat.index} + '].groupName'">Group</label>
                                                <select th:id="'educationList[' + ${iterStat.index} + '].groupName'"
                                                        th:name="'educationList[' + ${iterStat.index} + '].groupName'"
                                                        th:field="*{educationList[__${iterStat.index}__].groupName}"
                                                        class="form-control groupDropdown">
                                                    <option th:value="${education.groupName}"
                                                            th:text="${education.groupName}"
                                                            class="selected"></option>
                                                    <option value="" disabled selected>Select Group</option>
                                                </select>
                                            </div>

                                            <!-- Result Type Dropdown -->
                                            <div class="form-group col-md-3">
                                                <label th:for="'educationList[' + ${iterStat.index} + '].resultType'">Result
                                                    Type</label>
                                                <select th:id="'educationList[' + ${iterStat.index} + '].resultType'"
                                                        th:name="'educationList[' + ${iterStat.index} + '].resultType'"
                                                        th:field="*{educationList[__${iterStat.index}__].resultType}"
                                                        class="form-control resultTypeDropdown"
                                                        onchange="getMarksOrGpaOrCgpa(this.id)">
                                                    <option th:value="${education.resultType}"
                                                            th:text="${education.resultType}"
                                                            class="selected"></option>
                                                    <option value="" disabled selected>Select Result Type</option>
                                                </select>
                                            </div>

                                            <!-- Marks -->
                                            <div class="form-group col-md-2 marks"
                                                 th:classappend="${education.marks == '' ? 'd-none' : ''}">
                                                <label th:for="'educationList[' + ${iterStat.index} + '].marks'">Marks(%)</label>
                                                <input type="text"
                                                       th:id="'educationList[' + ${iterStat.index} + '].marks'"
                                                       th:field="*{educationList[__${iterStat.index}__].marks}"
                                                       class="form-control"/>
                                            </div>

                                            <!-- GPA -->
                                            <div class="form-group col-md-2 gpa"
                                                 th:classappend="${education.gpa == '' ? 'd-none' : ''}">
                                                <label th:for="'educationList[' + ${iterStat.index} + '].gpa'">GPA (out
                                                    of 5.00)</label>
                                                <input type="text"
                                                       th:id="'educationList[' + ${iterStat.index} + '].gpa'"
                                                       th:field="*{educationList[__${iterStat.index}__].gpa}"
                                                       class="form-control"/>
                                            </div>

                                            <!-- CGPA -->
                                            <div class="form-group col-md-2 cgpa"

                                                 th:classappend="${education.cgpa == '' ? 'd-none' : ''}">
                                                <label th:for="'educationList[' + ${iterStat.index} + '].cgpa'">CGPA
                                                    (out of 4.00)</label>
                                                <input type="text"
                                                       th:id="'educationList[' + ${iterStat.index} + '].cgpa'"
                                                       th:field="*{educationList[__${iterStat.index}__].cgpa}"
                                                       class="form-control"/>
                                            </div>
                                            <!--06-02-2025-->


                                            <!-- Documents -->
                                            <div class="form-group col-md-4">
                                                <label type="button" data-toggle="modal"
                                                       th:data-target="'#educationDocument'+ ${iterStat.index}">Current
                                                    Education Document: <span
                                                            class="text-primary font-weight-bold">View Education Document</span></label>
                                                <input type="file" class="form-control" id="uploadEducationDocuments"
                                                       name="uploadEducationDocuments"
                                                       accept=".jpeg, .jpg, .png, .pdf, .doc, .docx"/>
                                            </div>


                                            <div class="form-group col-sm-1 d-flex align-items-end">
                                                <button type="button" class="btn btn-success addEducationRow">+</button>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Modal for Education Document-->
                                    <div class="modal fade"
                                         data-th-each="educationDocument, iterStat : ${employee.educationList}"
                                         th:id="'educationDocument' + ${iterStat.index}" tabindex="-1" role="dialog"
                                         aria-labelledby="exampleModalCenterTitle2" aria-hidden="true">
                                        <div class="modal-dialog modal-sm modal-dialog-centered"
                                             role="document">
                                            <div class="modal-content modalContent">
                                                <div class="modal-header">
                                                    <h5 class="modal-title text-black-50" id="exampleModalCenterTitle2">
                                                        Education Document</h5>
                                                    <button type="button" class="close" data-dismiss="modal"
                                                            aria-label="Close">
                                                        <span aria-hidden="true" cursor="pointer">&times;</span>
                                                    </button>
                                                </div>
                                                <div class="modal-body">
                                                    <div class="w-100">
                                                        <img th:src="@{${educationDocument.documentPath}}"
                                                             class="img-fluid"
                                                             th:alt="${educationDocument.documentPath}"/>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Navigation Buttons -->
                                    <div class="row mt-3">
                                        <div class="d-flex justify-content-between w-100">
                                            <button type="button" class="btn btn-secondary prev-button"
                                                    data-prev="step2">Previous
                                            </button>
                                            <button type="button" class="btn btn-primary next-button" data-next="step4">
                                                Next
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <!------------------- Tab 3: Education Information End --------------------------------->

                                <!------------------- Tab 4: Previous Experience Start--------------------------------->
                                <div class="tab-pane fade" id="step4" role="tabpanel" aria-labelledby="step4-tab">
                                    <h6 style="text-align: center; color: #3030c9;"><b>Previous Experience</b></h6>
                                    <div class="form-group col-md-12 previousExperienceDetails">
                                        <!-- Container for dynamic rows -->
                                        <div
                                                data-th-each="experience, iterStat : ${employee.previousExperienceList}"
                                                class="row previousExperienceRow">

                                            <!-- Company Business -->
                                            <div class="form-group col-md-2">
                                                <label
                                                        th:for="'experience_' + ${iterStat.index} + '_companyBusiness'">Company Business</label>
                                                <select
                                                        th:id="'experience_' + ${iterStat.index} + '_companyBusiness'"
                                                        th:field="*{previousExperienceList[__${iterStat.index}__].companyBusiness}"
                                                        class="form-control"
                                                        required onchange="companyBusiness2Show(this.id)">
                                                    <option value="" disabled selected>Select Company Business
                                                    </option>
                                                    <option value="Public Relation Companies">Public Relation Companies
                                                    </option>
                                                    <option value="Security Service">Security Service
                                                    </option>
                                                    <option value="Power">Power
                                                    </option>
                                                    <option value="others">Others
                                                    </option>
                                                </select>
                                            </div>

                                            <!-- Company Business 2 -->
                                            <div class="form-group col-md-2"
                                                 th:classappend="${experience.companyBusiness2 == '' ? 'd-none' : ''}"
                                                 th:id="'experience_' + ${iterStat.index} + '_companyBusiness2Show'">
                                                <label
                                                        th:for="'experience_' + ${iterStat.index} + '_companyBusiness2'">Company Business</label>
                                                <input
                                                        type="text"
                                                        th:id="'experience_' + ${iterStat.index} + '_companyBusiness2'"
                                                        th:field="*{previousExperienceList[__${iterStat.index}__].companyBusiness2}"
                                                        class="form-control"
                                                        placeholder="Enter company name" />
                                            </div>
                                            <!-- Company Name -->
                                            <div class="form-group col-md-2">
                                                <label
                                                        th:for="'experience_' + ${iterStat.index} + '_companyName'"
                                                >Company Name</label>
                                                <input
                                                        type="text"
                                                        th:id="'experience_' + ${iterStat.index} + '_companyName'"
                                                        th:field="*{previousExperienceList[__${iterStat.index}__].companyName}"
                                                        class="form-control"
                                                        placeholder="Enter company name" required/>
                                            </div>
                                            <!-- Company Branch and Location -->
                                            <div class="form-group col-md-2">
                                                <label
                                                        th:for="'experience_' + ${iterStat.index} + '_branchLocation'"
                                                >Branch and Location</label>
                                                <input
                                                        type="text"
                                                        th:id="'experience_' + ${iterStat.index} + '_branchLocation'"
                                                        th:field="*{previousExperienceList[__${iterStat.index}__].branchLocation}"
                                                        class="form-control"
                                                        placeholder="Enter company branch and location" required/>
                                            </div>
                                            <!-- Designation -->
                                            <div class="form-group col-md-2">
                                                <label
                                                        th:for="'experience_' + ${iterStat.index} + '_designation'"
                                                >Designation</label>
                                                <input
                                                        type="text"
                                                        th:id="'experience_' + ${iterStat.index} + '_designation'"
                                                        th:field="*{previousExperienceList[__${iterStat.index}__].designation}"
                                                        class="form-control"
                                                        placeholder="Enter designation" required/>
                                            </div>
                                            <!-- Working Area / Division -->
                                            <div class="form-group col-md-2">
                                                <label
                                                        th:for="'experience_' + ${iterStat.index} + '_areaDivision'">Working Area / Division</label>
                                                <select
                                                        th:id="'experience_' + ${iterStat.index} + '_areaDivision'"
                                                        th:field="*{previousExperienceList[__${iterStat.index}__].areaDivision}"
                                                        class="form-control"
                                                        required onchange="companyBusiness2Show(this.id)">
                                                    <option value="" disabled selected>Select Area Division
                                                    </option>
                                                    <option value="Accounts Division">Accounts Division
                                                    </option>
                                                    <option value="Administrative Division">Administrative Division
                                                    </option>
                                                    <option value="Cards Division">Cards Division
                                                    </option>
                                                    <option value="others">Others
                                                    </option>
                                                </select>
                                            </div>

                                            <!-- Working Area / Division 2 -->
                                            <div class="form-group col-md-2 d-none"
                                                 th:classappend="${experience.areaDivision2 == '' ? 'd-none' : ''}"
                                                 th:id="'experience_' + ${iterStat.index} + '_areaDivision2Show'">
                                                <label
                                                        th:for="'experience_' + ${iterStat.index} + '_areaDivision2'">Working Area / Division</label>
                                                <input
                                                        type="text"
                                                        th:id="'experience_' + ${iterStat.index} + '_areaDivision2'"
                                                        th:field="*{previousExperienceList[__${iterStat.index}__].areaDivision2}"
                                                        class="form-control"
                                                        placeholder="Enter Area / Division name" />
                                            </div>
                                            <!-- Department / Function -->
                                            <div class="form-group col-md-2">
                                                <label
                                                        th:for="'experience_' + ${iterStat.index} + '_departmentFunction'"
                                                >Department / Function</label>
                                                <input
                                                        type="text"
                                                        th:id="'experience_' + ${iterStat.index} + '_departmentFunction'"
                                                        th:field="*{previousExperienceList[__${iterStat.index}__].deptFunction}"
                                                        class="form-control"
                                                        placeholder="Enter Department and Function" required/>
                                            </div>
                                            <!-- Area Expertise -->
                                            <div class="form-group col-md-2">
                                                <label
                                                        th:for="'experience_' + ${iterStat.index} + '_areaExpertise'"
                                                >Area Expertise</label>
                                                <input
                                                        type="text"
                                                        th:id="'experience_' + ${iterStat.index} + '_areaExpertise'"
                                                        th:field="*{previousExperienceList[__${iterStat.index}__].areaExpertise}"
                                                        class="form-control"
                                                        placeholder="Enter area expertise" required/>
                                            </div>


                                            <div class="form-group col-md-2">
                                                <label
                                                        th:for="'experience_' + ${iterStat.index} + '_startDate'"
                                                >Start Date</label>
                                                <input
                                                        type="date"
                                                        th:id="'experience_' + ${iterStat.index} + '_startDate'"
                                                        th:field="*{previousExperienceList[__${iterStat.index}__].startDate}"
                                                        class="form-control" required/>
                                            </div>
                                            <div class="form-group col-md-2">
                                                <label th:for="'experience_' + ${iterStat.index} + '_endDate'">End
                                                    Date</label>

                                                <input type="date"
                                                       th:id="'experience_' + ${iterStat.index} + '_endDate'"
                                                       th:field="*{previousExperienceList[__${iterStat.index}__].endDate}"
                                                       class="form-control" required/>
                                            </div>
                                            <div class="form-group col-md-2">
                                                <label type="button" data-toggle="modal"
                                                        th:data-target="'#experienceDocument'+ ${iterStat.index}">Current
                                                Experience Document: <span
                                                        class="text-primary font-weight-bold ">View Experience
                                                        Document</span></label>
                                                <input type="file" class="form-control" id="uploadExperienceDocuments"
                                                       name="uploadExperienceDocuments"
                                                       accept=".jpeg, .jpg, .png, .pdf, .doc, .docx" />
                                            </div>

                                            <!--Job Responsibilities-->
                                            <div class="form-group col-md-4" >
                                                <label
                                                        th:for="'experience_' + ${iterStat.index} + '_jobResponsibilities'"
                                                >Job Responsibilities</label>
                                                <textarea class="form-control"
                                                          th:id="'experience_' + ${iterStat.index} + '_jobResponsibilities'"
                                                          th:field="*{previousExperienceList[__${iterStat.index}__].jobResponsibilities}"
                                                          required
                                                          placeholder="Enter your job responsibilities"></textarea>
                                            </div>

                                            <div class="form-group col-sm-1 d-flex align-items-end">
                                                <button type="button" class="btn btn-success addExperienceRow">+
                                                </button>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Modal for Experience Document-->
                                    <div class="modal fade"
                                         data-th-each="experienceDocument, iterStat : ${employee.previousExperienceList}"
                                         th:id="'experienceDocument'+ ${iterStat.index}" tabindex="-1" role="dialog"
                                         aria-labelledby="exampleModalCenterTitle3" aria-hidden="true">
                                        <div class="modal-dialog modal-sm modal-dialog-centered"
                                             role="document">
                                            <div class="modal-content modalContent">
                                                <div class="modal-header">
                                                    <h5 class="modal-title text-black-50" id="exampleModalCenterTitle3">
                                                        Previous Experience Document</h5>
                                                    <button type="button" class="close" data-dismiss="modal"
                                                            aria-label="Close">
                                                        <span aria-hidden="true" cursor="pointer">&times;</span>
                                                    </button>
                                                </div>
                                                <div class="modal-body">
                                                    <div class="w-100">
                                                        <img th:src="@{${experienceDocument.documentPath}}"
                                                             class="img-fluid"
                                                             th:alt="${experienceDocument.documentPath}"/>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>


                                    <!-- Navigation Buttons -->
                                    <div class="row mt-3">
                                        <div class="d-flex justify-content-between w-100">
                                            <button type="button" class="btn btn-secondary prev-button"
                                                    data-prev="step3">Previous
                                            </button>
                                            <button type="button" class="btn btn-primary next-button" data-next="step5">
                                                Next
                                            </button>
                                        </div>
                                    </div>


                                </div>
                                <!------------------- Tab 4: Previous Experience End----------------------------------->

                                <!------------------- Tab 5: Family Information Start---------------------------------->
                                <div class="tab-pane fade" id="step5" role="tabpanel" aria-labelledby="step5-tab">
                                    <h6 style="text-align: center; color: #3030c9;"><b>Family Information</b></h6>
                                    <div class="form-group col-md-12 familyDetails">
                                        <div
                                                data-th-each="family, iterStat : ${employee.familyList}"
                                                class="row familyRow">

                                            <div class="form-group col-md-3">
                                                <label th:for="'family_' + ${iterStat.index} + '_relationType'"
                                                >Relationship Type</label>
                                                <select th:id="'family_' + ${iterStat.index} + '_relationType'"
                                                        th:field="*{familyList[__${iterStat.index}__].relationType}"
                                                        class="form-control" required onchange="removeValue(this.id)"
                                                >
                                                    <option value="" selected>Select Relation Type</option>
                                                    <option th:each="category : ${categories}"
                                                            th:value="${category.relationType}"
                                                            th:text="${category.relationType}">
                                                    </option>
                                                </select>
                                            </div>

                                            <div class="form-group col-md-3">
                                                <label
                                                        th:for="'family_' + ${iterStat.index} + '_name'"
                                                >Name</label>
                                                <input
                                                        type="text"
                                                        th:id="'family_' + ${iterStat.index} + '_name'"
                                                        th:field="*{familyList[__${iterStat.index}__].name}"
                                                        class="form-control" required
                                                        placeholder="Enter Name">
                                            </div>


                                            <div class="form-group col-md-3">
                                                <label th:for="'family_' + ${iterStat.index} + '_gender'"
                                                >Gender</label>
                                                <select th:id="'family_' + ${iterStat.index} + '_gender'"
                                                        th:field="*{familyList[__${iterStat.index}__].gender}"
                                                        class="form-control" required>
                                                    <option value="" disabled selected>Select Gender</option>
                                                    <option value="male">Male</option>
                                                    <option value="female">Female</option>
                                                    <option value="others">Others</option>
                                                </select>
                                            </div>

                                            <div class="form-group col-md-3">
                                                <label
                                                        th:for="'family_' + ${iterStat.index} + '_dateOfBirth'"
                                                >Date Of Birth</label>
                                                <input
                                                        type="date"
                                                        th:id="'family_' + ${iterStat.index} + '_dateOfBirth'"
                                                        th:field="*{familyList[__${iterStat.index}__].dateOfBirth}"
                                                        class="form-control" required/>
                                            </div>

                                            <div class="form-group col-md-3 d-flex justify-content-start">
                                                <div>
                                                    <div class="form-check form-check-inline">
                                                        <input class="form-check-input" type="checkbox"
                                                               th:id="'family_' + ${iterStat.index} + '_isAlive'"
                                                               name="isAlive"
                                                               th:value="${family.alive == 0 ? true : false}"
                                                               th:attr="checked=${family.alive == 0 ? 'checked' : null}">
                                                        <label class="form-check-label h4 text-black-50"
                                                               th:for="'family_' + ${iterStat.index} + '_isAlive'">Isn't
                                                            Alive?</label>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="form-group col-md-6" id="brcDocument"
                                                 th:classappend="${family.getBrcPath() == null ? 'd-none' : ''}"
                                                 >

                                                <label type="button" data-toggle="modal"
                                                       th:data-target="'#brcDocument' + ${iterStat.index}">Current
                                                    Birth Registration Certificate: <span
                                                            class="text-primary font-weight-bold">View Birth Registration Certificate Document</span></label>
                                                <input
                                                        type="file"
                                                        th:id="'family_' + ${iterStat.index} + '_brc'"
                                                        name="brcDocument"
                                                        class="form-control"
                                                        accept=".jpeg, .jpg, .png, .pdf, .doc, .docx"
                                                >
                                            </div>

                                            <!--                                            <div class="form-group col-md-6 d-none" id="brcDocument" th:unless="${family.brcPath}">-->

                                            <!--                                                <label th:for=" 'family_' + ${iterStat.index} + '_brc' " >-->
                                            <!--                                                    Birth Registration Certificate: </label>-->
                                            <!--                                                <input-->
                                            <!--                                                        type="file"-->
                                            <!--                                                        th:id=" 'family_' + ${iterStat.index} + '_brc' "-->
                                            <!--                                                        name="brcDocument"-->
                                            <!--                                                        class="form-control"-->
                                            <!--                                                        accept=".jpeg, .jpg, .png, .pdf, .doc, .docx"-->
                                            <!--                                                >-->
                                            <!--                                            </div>-->
                                            <!-- Modal for BRC-->
                                            <div class="modal fade"
                                                 data-th-each="brcDocument, iterStat : ${employee.familyList}"
                                                 th:id="'brcDocument' +${iterStat.index}" tabindex="-1" role="dialog"
                                                 aria-labelledby="exampleModalCenterTitle12" aria-hidden="true">
                                                <div class="modal-dialog modal-sm modal-dialog-centered"
                                                     role="document">
                                                    <div class="modal-content modalContent">
                                                        <div class="modal-header">
                                                            <h5 class="modal-title text-black-50"
                                                                id="exampleModalCenterTitle12">
                                                                Birth Registration Certificate Documents</h5>
                                                            <button type="button" class="close" data-dismiss="modal"
                                                                    aria-label="Close">
                                                                <span aria-hidden="true" cursor="pointer">&times;</span>
                                                            </button>
                                                        </div>
                                                        <div class="modal-body">
                                                            <div class="w-100">
                                                                <img th:src="@{${brcDocument.getBrcPath()}}"
                                                                     class="img-fluid"
                                                                     th:alt="${brcDocument.getBrcPath()}"/>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="form-group col-md-4" id="nidDocumentOfRelationType"
                                                 th:classappend="${family.getNidPath() == null ? 'd-none' : ''}"
                                            >
                                                <label type="button" data-toggle="modal"
                                                       th:for="'family_' + ${iterStat.index} + '_nidDocument'"
                                                       th:data-target="'#nidDocument' + ${iterStat.index}">Current
                                                    Nid Document: <span
                                                            class="text-primary font-weight-bold">View NID Document</span></label>
                                                <input
                                                        type="file"
                                                        th:id="'family_' + ${iterStat.index} + '_nidDocument'"
                                                        name="nidDocumentOfRelationType"
                                                        class="form-control"
                                                        accept=".jpg,.png,.jpeg, .pdf, .doc, .docx"
                                                >
                                            </div>

                                            <!-- Modal for Nid Document-->
                                            <div class="modal fade"
                                                 data-th-each="nidDocument, iterStat : ${employee.familyList}"
                                                 th:id="'nidDocument' +${iterStat.index}" tabindex="-1" role="dialog"
                                                 aria-labelledby="exampleModalCenterTitle13" aria-hidden="true">
                                                <div class="modal-dialog modal-sm modal-dialog-centered"
                                                     role="document">
                                                    <div class="modal-content modalContent">
                                                        <div class="modal-header">
                                                            <h5 class="modal-title text-black-50"
                                                                id="exampleModalCenterTitle18">
                                                                Nid Documents</h5>
                                                            <button type="button" class="close" data-dismiss="modal"
                                                                    aria-label="Close">
                                                                <span aria-hidden="true" cursor="pointer">&times;</span>
                                                            </button>
                                                        </div>
                                                        <div class="modal-body">
                                                            <div class="w-100">
                                                                <img th:src="@{${nidDocument.getNidPath()}}"
                                                                     class="img-fluid"
                                                                     th:alt="${nidDocument.getNidPath()}"/>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="form-group col-md-6" id="marriageCertificate"
                                                 th:classappend="${family.getMarrigeCertificatePath() == null ? 'd-none' : ''}"

                                                 >
                                                <label type="button" data-toggle="modal"
                                                       th:for="'family_' + ${iterStat.index} + '_marriageCertificate'"
                                                       th:data-target="'#marrigeDocument' + ${iterStat.index}">Current
                                                    Marriage Certificate: <span
                                                            class="text-primary font-weight-bold">View Marriage Certificate Document</span></label>
                                                <input
                                                        type="file"
                                                        th:id="'family_' + ${iterStat.index} + '_marriageCertificate'"
                                                        name="marriageCertificateDocument"
                                                        class="form-control"
                                                        accept=".jpeg, .jpg, .png"
                                                >
                                            </div>

                                            <!-- Modal for Marriage Certificate Document-->
                                            <div class="modal fade"
                                                 data-th-each="marrigeDocument, iterStat : ${employee.familyList}"
                                                 th:id="'marrigeDocument' +${iterStat.index}" tabindex="-1"
                                                 role="dialog"
                                                 aria-labelledby="exampleModalCenterTitle13" aria-hidden="true">
                                                <div class="modal-dialog modal-sm modal-dialog-centered"
                                                     role="document">
                                                    <div class="modal-content modalContent">
                                                        <div class="modal-header">
                                                            <h5 class="modal-title text-black-50"
                                                                id="exampleModalCenterTitle13">
                                                                Marriage Documents</h5>
                                                            <button type="button" class="close" data-dismiss="modal"
                                                                    aria-label="Close">
                                                                <span aria-hidden="true" cursor="pointer">&times;</span>
                                                            </button>
                                                        </div>
                                                        <div class="modal-body">
                                                            <div class="w-100">
                                                                <img th:src="@{${marrigeDocument.getMarrigeCertificatePath()}}"
                                                                     class="img-fluid"
                                                                     th:alt="${marrigeDocument.getMarrigeCertificatePath()}"/>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>


                                            <!--                                            <div class="form-group col-sm-2 d-flex align-items-end">-->
                                            <!--                                                <button type="button" class="btn btn-success addSpouseRow">+</button>-->
                                            <!--                                            </div>-->
                                        </div>
                                    </div>
                                    <!-- Spouse Information Section -->
                                    <!--                                    <div class="form-group col-md-12 spouseDetails">-->
                                    <!--                                        <div-->
                                    <!--                                                data-th-each="spouse, iterStat : ${employee.familyList}"-->
                                    <!--                                                class="row spouseRow"-->
                                    <!--                                        >-->
                                    <!--                                            <div class="form-group col-md-3">-->
                                    <!--                                                <label-->
                                    <!--                                                        th:for="'spouse_' + ${iterStat.index} + '_spouseFirstName'"-->
                                    <!--                                                >Spouse First Name</label>-->
                                    <!--                                                <input-->
                                    <!--                                                        type="text"-->
                                    <!--                                                        th:id="'spouse_' + ${iterStat.index} + '_spouseFirstName'"-->
                                    <!--                                                        th:field="*{familyList[__${iterStat.index}__].spouseFirstName}"-->
                                    <!--                                                        class="form-control" required-->
                                    <!--                                                        placeholder="Enter spouse first name">-->
                                    <!--                                            </div>-->

                                    <!--                                            <div class="form-group col-md-3">-->
                                    <!--                                                <label th:for="'spouse_' + ${iterStat.index} + '_spouseLastName'"-->
                                    <!--                                                >Spouse Last Name</label>-->
                                    <!--                                                <input type="text"-->
                                    <!--                                                       th:id="'spouse_' + ${iterStat.index} + '_spouseLastName'"-->
                                    <!--                                                       th:field="*{familyList[__${iterStat.index}__].spouseLastName}"-->
                                    <!--                                                       class="form-control" required-->
                                    <!--                                                       placeholder="Enter spouse last name">-->
                                    <!--                                            </div>-->
                                    <!--                                            <div class="form-group col-md-3">-->
                                    <!--                                                <label th:for="'spouse_' + ${iterStat.index} + '_spouseRelationship'"-->
                                    <!--                                                >Spouse Relationship</label>-->
                                    <!--                                                <select th:id="'spouse_' + ${iterStat.index} + '_spouseRelationship'"-->
                                    <!--                                                        th:field="*{familyList[__${iterStat.index}__].spouseRelationship}"-->
                                    <!--                                                        class="form-control">-->
                                    <!--                                                    <option value="" disabled selected>Select relation</option>-->
                                    <!--                                                    <option value="husband">Husband</option>-->
                                    <!--                                                    <option value="wife">Wife</option>-->
                                    <!--                                                </select>-->
                                    <!--                                            </div>-->

                                    <!--                                            <div class="form-group col-sm-2 d-flex align-items-end">-->
                                    <!--                                                <button type="button" class="btn btn-success addSpouseRow">+</button>-->
                                    <!--                                            </div>-->
                                    <!--                                        </div>-->
                                    <!--                                    </div>-->

                                    <!--                                    <h6 style="text-align: center; color: #3030c9;"><b>Child Information</b></h6>-->

                                    <!-- Child Information Section -->
                                    <!--                                    <div class="form-group col-md-12 childDetails">-->
                                    <!--                                        <div class="row childRow"-->
                                    <!--                                             data-th-each="children, iterStat : ${employee.familyList}">-->
                                    <!--                                            <div class="form-group col-md-3">-->
                                    <!--                                                <label th:for="'children_' + ${iterStat.index} + '_childrenName'"-->
                                    <!--                                                >Children's Name</label>-->
                                    <!--                                                <input type="text"-->
                                    <!--                                                       th:id="'children_' + ${iterStat.index} + '_childrenName'"-->
                                    <!--                                                       th:field="*{familyList[__${iterStat.index}__].childrenName}"-->
                                    <!--                                                       class="form-control" required-->
                                    <!--                                                       placeholder="Enter Children's Name">-->
                                    <!--                                            </div>-->

                                    <!--                                            <div class="form-group col-md-3">-->
                                    <!--                                                <label th:for="'children_' + ${iterStat.index} + '_dob'"-->
                                    <!--                                                >Date of Birth</label>-->
                                    <!--                                                <input type="date"-->
                                    <!--                                                       th:id="'children_' + ${iterStat.index} + '_dob'"-->
                                    <!--                                                       th:field="*{familyList[__${iterStat.index}__].dob}"-->
                                    <!--                                                       class="form-control" required>-->
                                    <!--                                            </div>-->

                                    <!--                                            <div class="form-group col-md-3">-->
                                    <!--                                                <label th:for="'children_' + ${iterStat.index} + '_childrenRelationship'"-->
                                    <!--                                                >Children's Relationship</label>-->
                                    <!--                                                <select th:id="'children_' + ${iterStat.index} + '_childrenRelationship'"-->
                                    <!--                                                        th:field="*{familyList[__${iterStat.index}__].childrenRelationship}"-->
                                    <!--                                                        class="form-control">-->
                                    <!--                                                    <option value="" disabled selected>Select relation</option>-->
                                    <!--                                                    <option value="son">Son</option>-->
                                    <!--                                                    <option value="daughter">Daughter</option>-->
                                    <!--                                                </select>-->
                                    <!--                                            </div>-->

                                    <!--                                            <div class="form-group col-sm-2 d-flex align-items-end">-->
                                    <!--                                                <button type="button" class="btn btn-success addchildRow">+</button>-->
                                    <!--                                            </div>-->
                                    <!--                                        </div>-->
                                    <!--                                    </div>-->

                                    <!-- Navigation Buttons -->
                                    <div class="row mt-3">
                                        <div class="d-flex justify-content-between w-100">
                                            <button type="button" class="btn btn-secondary prev-button"
                                                    data-prev="step4">
                                                Previous
                                            </button>
                                            <button type="button" class="btn btn-primary next-button" data-next="step6">
                                                Next
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <!------------------- Tab 5: Family Information End------------------------------------>

                                <!------------------- Tab 6: Clearance Information of Medical and Police Start---------------------------------->
                                <div class="tab-pane fade" id="step6" role="tabpanel" aria-labelledby="step6-tab">
                                    <h6 style="text-align: center; color: #3030c9;"><b>Clearance Information</b></h6>

                                    <!-- Medical Information Section -->
                                    <div class="form-group col-md-12 medicalDetails">
                                        <h6><b>Medical Information</b></h6>
                                        <div
                                                class="row medicalRow"
                                                data-th-each="medical, iterStat : ${employee.medicalList}"
                                        >
                                            <div class="form-group col-md-3">
                                                <label th:for="'medical_' + ${iterStat.index} + '_diagnosisLevel'">Diagnosis
                                                    Level</label>
                                                <select
                                                        th:id="'medical_' + ${iterStat.index} + '_diagnosisLevel'"
                                                        th:field="*{medicalList[__${iterStat.index}__].diagnosisLevel}"
                                                        class="form-control" required>
                                                    <option value="" disabled selected>Select Test Name</option>
                                                    <option value="blood">Blood</option>
                                                    <option value="urine">Urine</option>
                                                </select>
                                            </div>
                                            <div class="form-group col-md-3">
                                                <label th:for="'medical_' + ${iterStat.index} + '_testCenter'">Test
                                                    Center</label>
                                                <input type="text"
                                                       th:id="'medical_' + ${iterStat.index} + '_testCenter'"
                                                       th:field="*{medicalList[__${iterStat.index}__].testCenter}"
                                                       class="form-control" required>
                                            </div>
                                            <div class="form-group col-md-3">
                                                <label type="button" data-toggle="modal"
                                                       th:data-target="'#medicalDocument' + ${iterStat.index}">Current
                                                    Medical Document: <span
                                                            class="text-primary font-weight-bold">View Medical Document</span></label>
                                                <!-- Input for new document upload -->
                                                <input
                                                        type="file"
                                                        class="form-control"
                                                        id="uploadMedicalDocuments"
                                                        name="uploadMedicalDocuments"
                                                        accept=".jpeg, .jpg, .png, .pdf, .doc, .docx"/>
                                            </div>
                                            <div class="form-group col-sm-1 d-flex align-items-end">
                                                <button type="button" class="btn btn-success addMedicalRow">+</button>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Modal for Medical Document-->
                                    <div class="modal fade"
                                         data-th-each="medicalDocument, iterStat : ${employee.medicalList}"
                                         th:id="'medicalDocument' +${iterStat.index}" tabindex="-1" role="dialog"
                                         aria-labelledby="exampleModalCenterTitle4" aria-hidden="true">
                                        <div class="modal-dialog modal-sm modal-dialog-centered"
                                             role="document">
                                            <div class="modal-content modalContent">
                                                <div class="modal-header">
                                                    <h5 class="modal-title text-black-50" id="exampleModalCenterTitle4">
                                                        Medical Documents</h5>
                                                    <button type="button" class="close" data-dismiss="modal"
                                                            aria-label="Close">
                                                        <span aria-hidden="true" cursor="pointer">&times;</span>
                                                    </button>
                                                </div>
                                                <div class="modal-body">
                                                    <div class="w-100">
                                                        <img th:src="@{${medicalDocument.documentPath}}"
                                                             class="img-fluid"
                                                             th:alt="${medicalDocument.documentPath}"/>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Police Clearance Section -->
                                    <div class="form-group col-md-12 policeClearanceDetails">
                                        <h6><b>Police Clearance Information</b></h6>
                                        <div
                                                class="row policeClearanceRow"
                                                data-th-each="policeClearance, iterStat : ${employee.policeClearanceList}"
                                        >
                                            <div class="form-group col-md-4">
                                                <label th:for="'policeClearance[' + ${iterStat.index} + '].thana'">Thana</label>
                                                <input type="text"
                                                       th:id="'policeClearance[' + ${iterStat.index} + '].thana'"
                                                       th:field="*{policeClearanceList[__${iterStat.index}__].thana}"
                                                       class="form-control" required>
                                            </div>
                                            <div class="form-group col-md-4">
                                                <label th:for="'policeClearance[' + ${iterStat.index} + '].clearanceDate'">Clearance
                                                    Date</label>
                                                <input type="date"
                                                       th:id="'policeClearance[' + ${iterStat.index} + '].clearanceDate'"
                                                       th:field="*{policeClearanceList[__${iterStat.index}__].clearanceDate}"
                                                       class="form-control" required>
                                            </div>
                                            <div class="form-group col-md-4">
                                                <label type="button" data-toggle="modal"
                                                       th:data-target="'#policeClearanceDocument' + ${iterStat.index}">Current
                                                    Document: <span
                                                            class="text-primary font-weight-bold">View Current Document</span></label>
                                                <!-- Input for new document upload -->
                                                <input
                                                        type="file"
                                                        class="form-control"
                                                        id="uploadPoliceClearanceDocuments"
                                                        name="uploadPoliceClearanceDocuments"
                                                        accept=".jpeg, .jpg, .png, .pdf, .doc, .docx"/>
                                            </div>
                                            <div class="form-group col-sm-1 d-flex align-items-end">
                                                <button type="button" class="btn btn-success addPoliceClearanceRow">+
                                                </button>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Modal for Medical Document-->
                                    <div class="modal fade"
                                         data-th-each="policeClearancemedicalDocument, iterStat : ${employee.policeClearanceList}"
                                         th:id="'policeClearanceDocument' +${iterStat.index}" tabindex="-1"
                                         role="dialog"
                                         aria-labelledby="exampleModalCenterTitle4" aria-hidden="true">
                                        <div class="modal-dialog modal-sm modal-dialog-centered"
                                             role="document">
                                            <div class="modal-content modalContent">
                                                <div class="modal-header">
                                                    <h5 class="modal-title text-black-50" id="exampleModalCenterTitle6">
                                                        Police Clearance Documents</h5>
                                                    <button type="button" class="close" data-dismiss="modal"
                                                            aria-label="Close">
                                                        <span aria-hidden="true" cursor="pointer">&times;</span>
                                                    </button>
                                                </div>
                                                <div class="modal-body">
                                                    <div class="w-100">
                                                        <img th:src="@{${policeClearancemedicalDocument.documentPath}}"
                                                             class="img-fluid"
                                                             th:alt="${policeClearancemedicalDocument.documentPath}"/>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Navigation Buttons -->
                                    <div class="row mt-3">
                                        <div class="d-flex justify-content-between w-100">
                                            <button type="button" class="btn btn-secondary prev-button"
                                                    data-prev="step5">Previous
                                            </button>
                                            <button type="button" class="btn btn-primary next-button" data-next="step7">
                                                Next
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <!------------------- Tab 6: Clearance Information of Medical and Police Start ---------------------------------->

                                <!------------------- Tab 7: Present Address and Permanent Address Start---------------------------------->
                                <div class="tab-pane fade" id="step7" role="tabpanel" aria-labelledby="step7-tab">
                                    <h6 style="text-align: center; color: #3030c9;"><b>Addresses</b></h6>

                                    <!-- Permanent Address Section -->
                                    <div class="form-group col-md-12 permanentAddressDetails"
                                         id="permanentAddressDetails">
                                        <h6><b>Permanent Address</b></h6>
                                        <div class="form-group col-md-12">
                                            <div class="row permanentAddressRow" id="permanentAddressRow"
                                                 data-th-each="permanentAddress, iterStat : ${employee.addressList}">

                                                <!--08-02-2025-->
                                                <!--Country-->
                                                <div class="form-group col-md-3">
                                                    <label th:for="'permanentAddress_' + ${iterStat.index} + '_country'">Country</label>
                                                    <select
                                                            th:id="'permanentAddress_' + ${iterStat.index} + '_country'"
                                                            th:field="*{addressList[__${iterStat.index}__].prmCountry}"
                                                            class="form-control countryDropdown"
                                                            required onchange="getDivision(this.id)">
                                                        <option th:value="*{addressList[__${iterStat.index}__].prmCountry}"
                                                                th:text="*{addressList[__${iterStat.index}__].prmCountry}"
                                                                selected></option>
                                                        <option value="">Select Country</option>
                                                    </select>
                                                </div>

                                                <!--Division-->
                                                <div class="form-group col-md-3">
                                                    <label th:for="'permanentAddress_' + ${iterStat.index} + '_division'">Division</label>
                                                    <select
                                                            th:id="'permanentAddress_' + ${iterStat.index} + '_division'"
                                                            th:field="*{addressList[__${iterStat.index}__].prmDiv}"
                                                            class="form-control divisionDropdown"
                                                            required onchange="getDistrict(this.id)">
                                                        <option th:value="*{addressList[__${iterStat.index}__].prmDiv}"
                                                                th:text="*{addressList[__${iterStat.index}__].prmDiv}"
                                                                selected></option>
                                                        <option value="">Select Division</option>
                                                    </select>
                                                </div>

                                                <!--District-->
                                                <div class="form-group col-md-3">
                                                    <label th:for="'permanentAddress_' + ${iterStat.index} + '_district'">District</label>
                                                    <select
                                                            th:id="'permanentAddress_' + ${iterStat.index} + '_district'"
                                                            th:field="*{addressList[__${iterStat.index}__].prmDist}"
                                                            class="form-control districtDropdown"
                                                            required onchange="getThana(this.id)">
                                                        <option th:value="*{addressList[__${iterStat.index}__].prmDist}"
                                                                th:text="*{addressList[__${iterStat.index}__].prmDist}"
                                                                selected></option>
                                                        <option value="">Select District</option>
                                                    </select>
                                                </div>

                                                <!--Thana-->
                                                <div class="form-group col-md-3">
                                                    <label th:for="'permanentAddress_' + ${iterStat.index} + '_thana'">Thana</label>
                                                    <select
                                                            th:id="'permanentAddress_' + ${iterStat.index} + '_thana'"
                                                            th:field="*{addressList[__${iterStat.index}__].prmPS}"
                                                            class="form-control thanaDropdown"
                                                            required onchange="getPostOffice(this.id)">
                                                        <option th:value="*{addressList[__${iterStat.index}__].prmPS}"
                                                                th:text="*{addressList[__${iterStat.index}__].prmPS}"
                                                                selected></option>
                                                        <option value="" selected>Select Thana</option>
                                                    </select>
                                                </div>

                                                <!--Post-office-->
                                                <div class="form-group col-md-4">
                                                    <label th:for="'permanentAddress_' + ${iterStat.index} + '_postOffice'">Post
                                                        Office</label>
                                                    <select
                                                            th:id="'permanentAddress_' + ${iterStat.index} + '_postOffice'"
                                                            th:field="*{addressList[__${iterStat.index}__].prmPO}"
                                                            class="form-control postOfficeDropdown"
                                                            required>
                                                        <option th:value="*{addressList[__${iterStat.index}__].prmPO}"
                                                                th:text="*{addressList[__${iterStat.index}__].prmPO}"
                                                                selected></option>
                                                        <option value="">Select Post-Office</option>
                                                    </select>
                                                </div>

                                                <!--Address-->
                                                <div class="form-group col-md-4">
                                                    <label th:for="'permanentAddress_' + ${iterStat.index} + '_address'">Address</label>
                                                    <textarea class="form-control"
                                                              th:id="'permanentAddress_' + ${iterStat.index} + '_address'"
                                                              th:field="*{addressList[__${iterStat.index}__].prmAddr}"
                                                              rows="2"
                                                              placeholder="Enter Address" required></textarea>
                                                </div>
                                                <!--08-02-2025-->
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Present Address Section -->
                                    <div class="form-group col-md-12 presentAddressDetails">
                                        <div class="d-flex justify-content-start">
                                            <h6><b>Present Address</b></h6>
                                            <div class="form-check ml-2">
                                                <input class="form-check-input" type="checkbox" name="marked"
                                                       value="false" id="defaultCheck1">
                                                <label class="form-check-label" for="defaultCheck1">
                                                    Is present address same as permanent address?
                                                </label>
                                            </div>
                                        </div>
                                        <div class="form-group col-md-12" id="presentAddressRow">
                                            <div class="row addressRow"
                                                 data-th-each="presentAddress, iterStat : ${employee.addressList}">

                                                <!--08-02-2025-->
                                                <!--Country-->
                                                <div class="form-group col-md-3">
                                                    <label th:for="'presentAddress_' + ${iterStat.index} + '_country'">Country</label>
                                                    <select
                                                            th:id="'presentAddress_' + ${iterStat.index} + '_country'"
                                                            th:field="*{addressList[__${iterStat.index}__].prsCountry}"
                                                            class="form-control countryDropdown"
                                                            onchange="getPresentDivision(this.id)">
                                                        <option th:value="*{addressList[__${iterStat.index}__].prsCountry}"
                                                                th:text="*{addressList[__${iterStat.index}__].prsCountry}"
                                                                selected></option>
                                                        <option value="">Select Country</option>
                                                    </select>
                                                </div>

                                                <!--Division-->
                                                <div class="form-group col-md-3">
                                                    <label th:for="'presentAddress_' + ${iterStat.index} + '_division'">Division</label>
                                                    <select
                                                            th:id="'presentAddress_' + ${iterStat.index} + '_division'"
                                                            th:field="*{addressList[__${iterStat.index}__].prsDiv}"
                                                            class="form-control presentDivisionDropdown"
                                                            onchange="getPresentDistrict(this.id)">
                                                        <option th:value="*{addressList[__${iterStat.index}__].prsDiv}"
                                                                th:text="*{addressList[__${iterStat.index}__].prsDiv}"
                                                                selected></option>
                                                        <option value="">Select Division</option>
                                                    </select>
                                                </div>

                                                <!--District-->
                                                <div class="form-group col-md-3">
                                                    <label th:for="'presentAddress_' + ${iterStat.index} + '_district'">District</label>
                                                    <select
                                                            th:id="'presentAddress_' + ${iterStat.index} + '_district'"
                                                            th:field="*{addressList[__${iterStat.index}__].prsDist}"
                                                            class="form-control presentDistrictDropdown"
                                                            onchange="getPresentThana(this.id)">
                                                        <option th:value="*{addressList[__${iterStat.index}__].prsDist}"
                                                                th:text="*{addressList[__${iterStat.index}__].prsDist}"
                                                                selected></option>
                                                        <option value="">Select District</option>
                                                    </select>
                                                </div>

                                                <!--Thana-->
                                                <div class="form-group col-md-3">
                                                    <label th:for="'presentAddress_' + ${iterStat.index} + '_thana'">Thana</label>
                                                    <select
                                                            th:id="'presentAddress_' + ${iterStat.index} + '_thana'"
                                                            th:field="*{addressList[__${iterStat.index}__].prsPS}"
                                                            class="form-control presentThanaDropdown"
                                                            onchange="getPresentPostOffice(this.id)">
                                                        <option th:value="*{addressList[__${iterStat.index}__].prsPS}"
                                                                th:text="*{addressList[__${iterStat.index}__].prsPS}"
                                                                selected></option>
                                                        <option value="">Select Thana</option>
                                                    </select>
                                                </div>

                                                <!--Post-office-->
                                                <div class="form-group col-md-4">
                                                    <label th:for="'presentAddress_' + ${iterStat.index} + '_postOffice'">Post
                                                        Office</label>
                                                    <select
                                                            th:id="'presentAddress_' + ${iterStat.index} + '_postOffice'"
                                                            th:field="*{addressList[__${iterStat.index}__].prsPO}"
                                                            class="form-control presentPostOfficeDropdown">
                                                        <option th:value="*{addressList[__${iterStat.index}__].prsPO}"
                                                                th:text="*{addressList[__${iterStat.index}__].prsPO}"
                                                                selected></option>
                                                        <option value="">Select Post-Office</option>
                                                    </select>
                                                </div>

                                                <!--Address-->
                                                <div class="form-group col-md-4">
                                                    <label th:for="'presentAddress_' + ${iterStat.index} + '_address'">Address</label>
                                                    <textarea class="form-control"
                                                              th:id="'presentAddress_' + ${iterStat.index} + '_address'"
                                                              th:field="*{addressList[__${iterStat.index}__].prsAddr}"
                                                              rows="2"
                                                              placeholder="Enter Address"></textarea>
                                                </div>
                                                <!--08-02-2025-->

                                            </div>
                                        </div>
                                    </div>

                                    <!-- Contact Address Section -->
                                    <div class="form-group col-md-12 contactAddressDetails"
                                         id="contactAddressDetails">
                                        <div class="d-flex justify-content-start">
                                            <h6><b>Contact Address</b></h6>
                                            <div class="form-check ml-2">
                                                <input class="form-check-input" type="checkbox" name="marked2"
                                                       value="false" id="defaultCheck2">
                                                <label class="form-check-label" for="defaultCheck2">
                                                    Is contact address same as present address?
                                                </label>
                                            </div>
                                        </div>
                                        <div class="form-group col-md-12" id="contactAddressRow">
                                            <div class="row contactAddressRow"
                                                 data-th-each="contactAddress, iterStat : ${employee.addressList}">
                                                <!--08-02-2025-->
                                                <!--Country-->
                                                <div class="form-group col-md-3">
                                                    <label th:for="'contactAddress_' + ${iterStat.index} + '_country'">Country</label>
                                                    <select
                                                            th:id="'contactAddress_' + ${iterStat.index} + '_country'"
                                                            th:field="*{addressList[__${iterStat.index}__].conCountry}"
                                                            class="form-control countryDropdown"
                                                            onchange="getContactDivision(this.id)">
                                                        <option th:value="*{addressList[__${iterStat.index}__].conCountry}"
                                                                th:text="*{addressList[__${iterStat.index}__].conCountry}"
                                                                selected></option>
                                                        <option value="">Select Country</option>
                                                    </select>
                                                </div>

                                                <!--Division-->
                                                <div class="form-group col-md-3">
                                                    <label th:for="'contactAddress_' + ${iterStat.index} + '_division'">Division</label>
                                                    <select
                                                            th:id="'contactAddress_' + ${iterStat.index} + '_division'"
                                                            th:field="*{addressList[__${iterStat.index}__].conDiv}"
                                                            class="form-control contactDivisionDropdown"
                                                            onchange="getContactDistrict(this.id)">
                                                        <option th:value="*{addressList[__${iterStat.index}__].conDiv}"
                                                                th:text="*{addressList[__${iterStat.index}__].conDiv}"
                                                                selected></option>
                                                        <option value="" selected>Select Division</option>
                                                    </select>
                                                </div>

                                                <!--District-->
                                                <div class="form-group col-md-3">
                                                    <label th:for="'contactAddress_' + ${iterStat.index} + '_district'">District</label>
                                                    <select
                                                            th:id="'contactAddress_' + ${iterStat.index} + '_district'"
                                                            th:field="*{addressList[__${iterStat.index}__].conDist}"
                                                            class="form-control contactDistrictDropdown"
                                                            onchange="getContactThana(this.id)">
                                                        <option th:value="*{addressList[__${iterStat.index}__].conDist}"
                                                                th:text="*{addressList[__${iterStat.index}__].conDist}"
                                                                selected></option>
                                                        <option value="" selected>Select District</option>
                                                    </select>
                                                </div>

                                                <!--Thana-->
                                                <div class="form-group col-md-3">
                                                    <label th:for="'contactAddress_' + ${iterStat.index} + '_thana'">Thana</label>
                                                    <select
                                                            th:id="'contactAddress_' + ${iterStat.index} + '_thana'"
                                                            th:field="*{addressList[__${iterStat.index}__].conPS}"
                                                            class="form-control contactThanaDropdown"
                                                            onchange="getContactPostOffice(this.id)">
                                                        <option th:value="*{addressList[__${iterStat.index}__].conPS}"
                                                                th:text="*{addressList[__${iterStat.index}__].conPS}"
                                                                selected></option>
                                                        <option value="" selected>Select Thana</option>
                                                    </select>
                                                </div>

                                                <!--Post-office-->
                                                <div class="form-group col-md-4">
                                                    <label th:for="'contactAddress_' + ${iterStat.index} + '_postOffice'">Post
                                                        Office</label>
                                                    <select
                                                            th:id="'contactAddress_' + ${iterStat.index} + '_postOffice'"
                                                            th:field="*{addressList[__${iterStat.index}__].conPO}"
                                                            class="form-control contactPostOfficeDropdown">
                                                        <option th:value="*{addressList[__${iterStat.index}__].conPO}"
                                                                th:text="*{addressList[__${iterStat.index}__].conPO}"
                                                                selected></option>
                                                        <option value="" selected>Select Post-Office</option>
                                                    </select>
                                                </div>

                                                <!--Address-->
                                                <div class="form-group col-md-4">
                                                    <label th:for="'contactAddress_' + ${iterStat.index} + '_address'">Address</label>
                                                    <textarea class="form-control"
                                                              th:id="'contactAddress_' + ${iterStat.index} + '_address'"
                                                              th:field="*{addressList[__${iterStat.index}__].conAddr}"
                                                              rows="2"
                                                              placeholder="Enter Address"></textarea>
                                                </div>
                                                <!--08-02-2025-->
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Navigation Buttons -->
                                    <div class="row mt-3">
                                        <div class="d-flex justify-content-between w-100">
                                            <button type="button" class="btn btn-secondary prev-button"
                                                    data-prev="step6">Previous
                                            </button>
                                            <button type="submit" class="btn btn-success">Submit</button>
                                        </div>
                                    </div>
                                </div>
                                <!------------------- Tab 7: Present Address and Permanent Address Start---------------------------------->

                            </div>
                        </form>
                    </div>

                </div>

            </div>
        </div>
    </div>


</div>


<!--&lt;!&ndash;Custom JS&ndash;&gt;-->
<!--<script layout:fragment="customJS" th:src="@{/js/update.js}" type="text/javascript"></script>-->

<!--&lt;!&ndash;Specific Page JS&ndash;&gt;-->
<!--<th:block layout:fragment="script">-->
<!--    <script>-->
<!--        console.log("Update.html")-->
<!--    </script>-->


<th:block layout:fragment="script">


    <script>


        document.addEventListener('DOMContentLoaded', function () {
            debugger
            const form = document.getElementById('employeeForm');
            const wizardTabs = document.getElementById('wizardTabs');
            const nextButtons = document.querySelectorAll('.next-button');
            const prevButtons = document.querySelectorAll('.prev-button');
            const tabs = document.querySelectorAll('.nav-link');

// Function to validate a tab's required fields
            function validateTab(tabPane) {
                const requiredFields = tabPane.querySelectorAll('[required]');
                let isValid = true;

                requiredFields.forEach(field => {
                    if (!field.value.trim()) {
                        field.classList.add('is-invalid');
                        isValid = false;
                    } else {
                        field.classList.remove('is-invalid');
                    }
                });

                return isValid;
            }

// Function to switch to a specific tab
            function switchToTab(targetTabId) {
                debugger
// Hide all tab panes
                document.querySelectorAll('.tab-pane').forEach(pane => {
                    pane.classList.remove('show', 'active');
                });

// Deactivate all tab buttons
                tabs.forEach(tab => {
                    tab.classList.remove('active');
                    tab.setAttribute('aria-selected', 'false');
                });

// Show the target tab pane
                const targetPane = document.getElementById(targetTabId);
                targetPane.classList.add('show', 'active');

                const targetTab = document.querySelector(`[data-bs-target="#${targetTabId}"]`);
                targetTab.classList.add('active');
                targetTab.setAttribute('aria-selected', 'true');
            }

// Next button click handler
            nextButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const nextTabId = button.getAttribute('data-next');
                    const currentTab = document.querySelector('.tab-pane.show.active');

// Validate current tab before moving to next
                    if (validateTab(currentTab)) {
                        switchToTab(nextTabId);
                    }
                });
            });

// Previous button click handler
            prevButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const prevTabId = button.getAttribute('data-prev');
                    switchToTab(prevTabId);
                });
            });

// Optional: Add validation class to show when a field is invalid
            document.querySelectorAll('[required]').forEach(field => {
                field.addEventListener('input', function () {
                    if (this.value.trim()) {
                        this.classList.remove('is-invalid');
                    } else {
                        this.classList.add('is-invalid');
                    }
                });
            });

// Prevent form submission if tabs are not fully validated
            form.addEventListener('submit', (e) => {
// Validate all tabs
                const allTabs = document.querySelectorAll('.tab-pane');
                let allTabsValid = true;

                allTabs.forEach(tab => {
                    if (!validateTab(tab)) {
                        allTabsValid = false;
                    }
                });

                if (!allTabsValid) {
                    e.preventDefault();
                    alert('Please fill in all required fields in all tabs.');
                }
            });
        });

    </script>


    <script>

        document.addEventListener("DOMContentLoaded", function () {
            const educationContainer = document.querySelector(".educationDetails");

            document.addEventListener("click", function (e) {

// Add a new row
                if (e.target && e.target.classList.contains("addEducationRow")) {
                    debugger
                    const educationRow = educationContainer.querySelector(".educationRow");
// Clone the first row
                    const newRow = educationRow.cloneNode(true);


// Clear input values in the cloned row
                    newRow.querySelectorAll("input, select").forEach((element) => {
                        if (element.tagName === "SELECT") {
                            debugger
element.selectedIndex = 0; // Reset dropdown
                        } else {
                            if (element.tagName === "INPUT") {
                                element.value = ""; // Clear input
                            }
                        }
                    });

// Update indices in `name`, `id`, and `th:field` attributes
                    const allRows = educationContainer.querySelectorAll(".educationRow");
                    const newIndex = allRows.length; // Determine the new index
                    console.log(`New row index: ${newIndex}`);


                    newRow.querySelectorAll("[id], [name]").forEach((field) => {
// Update the `id` and `name` attributes with the new index
                        if (field.id) {
                            const updatedId = field.id.replace(/\[\d+\]/, `[${newIndex}]`);
                            console.log(
                                `Updating ID from ${field.id} to ${updatedId}`
                            );
                            field.id = updatedId;
                        }
                        if (field.name) {
                            const updatedName = field.name.replace(
                                /\[\d+\]/,
                                `[${newIndex}]`
                            );
                            console.log(
                                `Updating Name from ${field.name} to ${updatedName}`
                            );
                            field.name = updatedName;
                        }
                    });


// Modify the button group
                    const buttonGroup = newRow.querySelector(".form-group.col-sm-1.d-flex.align-items-end");
                    buttonGroup.innerHTML = `
<button type="button" class="btn btn-success addEducationRow">+</button>
<button type="button" class="btn btn-danger removeEducationRow" style="margin-left: 5px;">-</button>
`;

// Append the cloned row to the container
                    const newEducationRow = educationContainer.appendChild(newRow);

                    const selected = newEducationRow.querySelectorAll(".selected");
                    selected.forEach((element) => {
                        element.remove(); // Reset dropdown
                    });

                    const educationDocumentsChildNodes = newEducationRow.querySelector("#educationDocuments").childNodes;
                    educationDocumentsChildNodes.forEach((element) => {
                        if (element.tagName === "INPUT") {
                            debugger
                            element.setAttribute("required"); // Add Required
                            console.log(element);
                        } else if (element.tagName === "LABEL") {
                            element.innerText = "Upload Education Documents"; // Change Label Inner text
                        } else if (element.tagName === "SPAN") {
                            element.remove(); // Remove View Document
                        }
                    });

                }

// Remove a row
                if (e.target && e.target.classList.contains("removeEducationRow")) {
                    const row = e.target.closest(".educationRow");

                    if (educationContainer.childElementCount > 1) {
                        row.remove();
                    } else {
                        alert("At least one education row must remain.");
                    }
                }
            });
        });

        /*---------------------------javascript to increase spouse row Start--------------------------------------*/
        document.addEventListener("DOMContentLoaded", function () {
            const spouseContainer = document.querySelector(".spouseDetails");

            document.addEventListener("click", function (e) {
                if (e.target && e.target.classList.contains("addSpouseRow")) {
                    const spouseRow = spouseContainer.querySelector(".spouseRow");
                    const newRow = spouseRow.cloneNode(true);

// Clear input values in the cloned row
                    newRow.querySelectorAll("input, select").forEach((element) => {
                        if (element.tagName === "SELECT") {
                            element.selectedIndex = 0; // Reset dropdown
                        } else {
                            element.value = ""; // Clear input
                        }
                    });


// Update indices in `name`, `id`, and `th:field` attributes
                    const allRows = spouseContainer.querySelectorAll(".spouseRow");
                    const newIndex = allRows.length; // Determine the new index
                    console.log("New row index:", newIndex);

                    newRow.querySelectorAll("[id], [name]").forEach((field) => {
// Update the `id` and `name` attributes with the new index
                        if (field.id) {
                            const updatedId = field.id.replace(/\[\d+\]/, `[${newIndex}]`);
                            console.log(`Updating ID from ${field.id} to ${updatedId}`);
                            field.id = updatedId;
                        }
                        if (field.name) {
                            const updatedName = field.name.replace(
                                /\[\d+\]/,
                                `[${newIndex}]`
                            );
                            console.log(
                                `Updating Name from ${field.name} to ${updatedName}`
                            );
                            field.name = updatedName;
                        }
                    });


// Update button group
                    const buttonGroup = newRow.querySelector(".form-group.col-sm-2.d-flex.align-items-end");
                    buttonGroup.innerHTML = `
<button type="button" class="btn btn-success addSpouseRow">+</button>
<button type="button" class="btn btn-danger removeSpouseRow" style="margin-left: 5px;">-</button>
`;

                    spouseContainer.appendChild(newRow);
                }

                if (e.target && e.target.classList.contains("removeSpouseRow")) {
                    const row = e.target.closest(".spouseRow");
                    if (spouseContainer.childElementCount > 1) {
                        row.remove();
                    } else {
                        alert("At least one spouse row must remain.");
                    }
                }
            });
        });
        /*--------------------------javascript to increase spouse row end---------------------------------------*/

        /*----------------------------javascript to increase children row Start----------------------------------*/
        document.addEventListener("DOMContentLoaded", function () {
            const childContainer = document.querySelector(".childDetails");

            document.addEventListener("click", function (e) {
                if (e.target && e.target.classList.contains("addchildRow")) {
                    const childRow = childContainer.querySelector(".childRow");
                    const newRow = childRow.cloneNode(true);

// Clear input values in the cloned row
                    newRow.querySelectorAll("input, select").forEach((element) => {
                        if (element.tagName === "SELECT") {
                            element.selectedIndex = 0; // Reset dropdown
                        } else {
                            element.value = ""; // Clear input
                        }
                    });


// Update indices in `name`, `id`, and `th:field` attributes
                    const allRows = childContainer.querySelectorAll(".childRow");
                    const newIndex = allRows.length; // Determine the new index
                    console.log("New row index:", newIndex);

                    newRow.querySelectorAll("[id], [name]").forEach((field) => {
// Update the `id` and `name` attributes with the new index
                        if (field.id) {
                            const updatedId = field.id.replace(/\[\d+\]/, `[${newIndex}]`);
                            console.log(`Updating ID from ${field.id} to ${updatedId}`);
                            field.id = updatedId;
                        }
                        if (field.name) {
                            const updatedName = field.name.replace(
                                /\[\d+\]/,
                                `[${newIndex}]`
                            );
                            console.log(
                                `Updating Name from ${field.name} to ${updatedName}`
                            );
                            field.name = updatedName;
                        }
                    });

// Update button group
                    const buttonGroup = newRow.querySelector(".form-group.col-sm-2.d-flex.align-items-end");
                    buttonGroup.innerHTML = `
<button type="button" class="btn btn-success addchildRow">+</button>
<button type="button" class="btn btn-danger removechildRow" style="margin-left: 5px;">-</button>
`;

                    childContainer.appendChild(newRow);
                }

                if (e.target && e.target.classList.contains("removechildRow")) {
                    const row = e.target.closest(".childRow");
                    if (childContainer.childElementCount > 1) {
                        row.remove();
                    } else {
                        alert("At least one child row must remain.");
                    }
                }
            });
        });
        /*---------------------------javascript to increase children row End---------------------------------------*/

        /*-------------------------javascript to increase medical row Start--------------------------------------*/
        document.addEventListener("DOMContentLoaded", function () {
            const medicalContainer = document.querySelector(".medicalDetails");

            document.addEventListener("click", function (e) {
// Handle adding new medical rows
                if (e.target && e.target.classList.contains("addMedicalRow")) {
                    const medicalRow = medicalContainer.querySelector(".medicalRow");
                    const newRow = medicalRow.cloneNode(true);

// Clear input values in the cloned row
                    newRow.querySelectorAll("input, select").forEach((element) => {
                        if (element.tagName === "SELECT") {
                            element.selectedIndex = 0; // Reset dropdown
                        } else if (element.type === "file") {
                            element.value = null; // Clear file input
                        } else {
                            element.value = ""; // Clear text input
                        }
                    });

// Update indices in `name`, `id`, and `th:field` attributes
                    const allRows = medicalContainer.querySelectorAll(".medicalRow");
                    const newIndex = allRows.length; // Determine the new index
                    console.log("New row index:", newIndex);

                    newRow.querySelectorAll("[id], [name]").forEach((field) => {
// Update the `id` and `name` attributes with the new index
                        if (field.id) {
                            const updatedId = field.id.replace(/\[\d+\]/, `[${newIndex}]`);
                            console.log(`Updating ID from ${field.id} to ${updatedId}`);
                            field.id = updatedId;
                        }
                        if (field.name) {
                            const updatedName = field.name.replace(
                                /\[\d+\]/,
                                `[${newIndex}]`
                            );
                            console.log(
                                `Updating Name from ${field.name} to ${updatedName}`
                            );
                            field.name = updatedName;
                        }
                    });

// Update button group
                    const buttonGroup = newRow.querySelector(".form-group.col-sm-1.d-flex.align-items-end");
                    buttonGroup.innerHTML = `
<button type="button" class="btn btn-success addMedicalRow">+</button>
<button type="button" class="btn btn-danger removemedicalRow" style="margin-left: 5px;">-</button>
`;

                    medicalContainer.appendChild(newRow);
                }

// Handle removing medical rows
                if (e.target && e.target.classList.contains("removemedicalRow")) {
                    const row = e.target.closest(".medicalRow");
                    const totalRows = medicalContainer.querySelectorAll(".medicalRow").length;

                    if (totalRows > 1) {
                        row.remove();
                    } else {
                        alert("At least one medical row must remain.");
                    }
                }
            });
        });
        /*--------------------------javascript to increase medical row end--------------------------------------*/

        /*---------------------------javascript to increase police clearance row Start--------------------------------------*/
        document.addEventListener("DOMContentLoaded", function () {
            const policeClearanceContainer = document.querySelector(".policeClearanceDetails");

            document.addEventListener("click", function (e) {
// Handle adding new medical rows
                if (e.target && e.target.classList.contains("addPoliceClearanceRow")) {
                    const policeClearanceRow = policeClearanceContainer.querySelector(".policeClearanceRow");
                    const newRow = policeClearanceRow.cloneNode(true);

// Clear input values in the cloned row
                    newRow.querySelectorAll("input, select").forEach((element) => {
                        if (element.tagName === "SELECT") {
                            element.selectedIndex = 0; // Reset dropdown
                        } else if (element.type === "file") {
                            element.value = null; // Clear file input
                        } else {
                            element.value = ""; // Clear text input
                        }
                    });

// Update indices in `name`, `id`, and `th:field` attributes
                    const allRows = policeClearanceContainer.querySelectorAll(".policeClearanceRow");
                    const newIndex = allRows.length; // Determine the new index
                    console.log("New row index:", newIndex);

                    newRow.querySelectorAll("[id], [name]").forEach((field) => {
// Update the `id` and `name` attributes with the new index
                        if (field.id) {
                            const updatedId = field.id.replace(/\[\d+\]/, `[${newIndex}]`);
                            console.log(`Updating ID from ${field.id} to ${updatedId}`);
                            field.id = updatedId;
                        }
                        if (field.name) {
                            const updatedName = field.name.replace(
                                /\[\d+\]/,
                                `[${newIndex}]`
                            );
                            console.log(
                                `Updating Name from ${field.name} to ${updatedName}`
                            );
                            field.name = updatedName;
                        }
                    });

// Update button group
                    const buttonGroup = newRow.querySelector(".form-group.col-sm-1.d-flex.align-items-end");
                    buttonGroup.innerHTML = `
<button type="button" class="btn btn-success addPoliceClearanceRow">+</button>
<button type="button" class="btn btn-danger removePoliceClearanceRow" style="margin-left: 5px;">-</button>
`;

                    policeClearanceContainer.appendChild(newRow);
                }

// Handle removing medical rows
                if (e.target && e.target.classList.contains("removePoliceClearanceRow")) {
                    const row = e.target.closest(".policeClearanceRow");
                    const totalRows = policeClearanceContainer.querySelectorAll(".policeClearanceRow").length;

                    if (totalRows > 1) {
                        row.remove();
                    } else {
                        alert("At least one medical row must remain.");
                    }
                }
            });
        });
        /*---------------------------javascript to increase police clearance row end--------------------------------------*/


        /*--      Fetch all education--*/
        // Load Education Levels dynamically when the page is loaded
        document.addEventListener('DOMContentLoaded', function () {
            fetchEducationLevels();
        });

        function fetchEducationLevels() {
// Fetch education levels from the backend and populate the dropdown
            fetch(`http://localhost:8086/employee/levels`)
                .then(response => response.json())
                .then(data => {
                    const allEducationRow = document.querySelectorAll('.educationRow');
                    allEducationRow.forEach((key, index) => {
                        const educationLevelSelect = document.getElementById('education[' + index + '].levelOfEducation');
// educationLevelSelect.innerHTML = '<option value="" disabled>Select Education Level</option>';
                        console.log("Education Levels: ", data);

                        data.forEach(level => {
                            const option = document.createElement('option');
                            option.value = level;
                            option.textContent = level;
                            educationLevelSelect.appendChild(option);
                        });
                    })

                })
                .catch(error => console.error("Error fetching education levels:", error));
        }

        // Fetch Exam Titles dynamically based on the selected education level
        function getExamTitle(selectId) {
            debugger
            const newId = selectId.match(/\d/g);
            const educationLevelValue = document.getElementById(selectId).value;
            if (!educationLevelValue) {
                console.log("No education level selected.");
                return;
            }

            //22-02-2025
            const educationRow = document.querySelectorAll('.educationRow')[newId];
            // // Clear other input values in the cloned row
            educationRow.querySelectorAll("input, select").forEach((element) => {

                if(!(element.classList.contains('levelOfEducation'))){
                    if (element.tagName === "SELECT") {
                        element.selectedIndex = 0; // Reset dropdown
                    } else {
                        element.value = ""; // Clear input
                    }
                }

            });

            //22-02-2025

            console.log("Selected Education Level: ", educationLevelValue);

//Fetch exam titles based on the selected education level
            fetch(`http://localhost:8086/employee/titles?levelOfEducation=${educationLevelValue}`)
                .then(response => response.json())
                .then(data => {
                    const examDegreeSelect = document.querySelectorAll('.examDegreeTitle');

                    examDegreeSelect[newId].innerHTML = '<option value="" disabled selected>Select Exam/Degree Title</option>';
                    console.log("Exam Titles: ", data);

                    data.forEach(title => {
                        const option = document.createElement('option');
                        option.value = title;
                        option.textContent = title;
                        examDegreeSelect[newId].appendChild(option);
                    });

// Enable the dropdown after populating options
                    examDegreeSelect.disabled = false;
                })
                .catch(error => console.error("Error fetching exam titles:", error));


//Fetch university/Bord names based on the selected education level
            if (educationLevelValue !== 'Master’s Degree' && educationLevelValue !== 'Doctoral Degree' && educationLevelValue !== 'Bachelor’s Degree' && educationLevelValue !== 'Diploma Degree') {
                debugger
                fetch(`http://localhost:8086/employee/university`).then(response => response.json())
                    .then(data => {
                        const universitySelect = document.querySelectorAll('.universityDropdown');
                        console.log("Length " + newId);
                        universitySelect[newId].innerHTML = '<option value="" disabled selected>Select University/Board</option>';
                        console.log("University/Bord Names: ", data);

                        data.forEach(board => {
                            const option = document.createElement('option');
                            option.value = board.boardName;
                            option.textContent = board.boardName;
                            universitySelect[newId].appendChild(option);
                        });

// Enable the dropdown after populating options
                        universitySelect.disabled = false;
                    })
                    .catch(error => console.error("Error fetching university/Bord names:", error));


                //06-02-2025
                if (["Higher Secondary/A Level", "Secondary/O Level"].includes(educationLevelValue)) { //06-02-2025
                    fetch(`http://localhost:8086/employee/group-name`).then(response => response.json())
                        .then(data => {
                            const groupSelect = document.querySelectorAll('.groupDropdown');
                            console.log("Length " + newId);
                            groupSelect[newId].innerHTML = '<option value="" disabled selected>Select Group</option>';
                            console.log("Group: ", data);

                            data.forEach(group => {
                                const option = document.createElement('option');
                                option.value = group;
                                option.textContent = group;
                                groupSelect[newId].appendChild(option);
                            });
                        })
                        .catch(error => console.error("Error fetching group names:", error));

                }
                //06-02-2025
            } else if (educationLevelValue === 'Diploma Degree') {
                debugger
                fetch(`http://localhost:8086/employee/university`).then(response => response.json())
                    .then(data => {
                        const universitySelect = document.querySelectorAll('.universityDropdown');
                        console.log("Length " + newId);
                        universitySelect[newId].innerHTML = '<option value="" disabled selected>Select University/Board/Institute</option>';
                        console.log("University/Bord Names: ", data);

                        data.forEach(institute => {
                            const option = document.createElement('option');
                            option.value = institute.instName;
                            option.textContent = institute.instName;
                            universitySelect[newId].appendChild(option);
                        });
                    })
                    .catch(error => console.error("Error fetching university/Bord names:", error));
            } else {
                fetch(`http://localhost:8086/employee/university`).then(response => response.json())
                    .then(data => {
                        const universitySelect = document.querySelectorAll('.universityDropdown');
                        console.log("Length " + newId);
                        universitySelect[newId].innerHTML = '<option value="" disabled selected>Select University/Board/Institute</option>';
                        console.log("University/Bord Names: ", data);

                        data.forEach(university => {
                            const option = document.createElement('option');
                            option.value = university.universityName;
                            option.textContent = university.universityName;
                            universitySelect[newId].appendChild(option);
                        });
                    })
                    .catch(error => console.error("Error fetching university/Bord names:", error));
            }
        }

        // Fetch School / College dynamically based on the selected Board/University
        function getSchoolCollege(id) {
            debugger
            const newId = id.match(/\d/g);
            const getLevelOfEducation = document.getElementById(`education[${newId}].levelOfEducation`);
            const getBoardUniversity = document.getElementById(id);

            const educationLevelValue = getLevelOfEducation.value;
            const boardUniversityValue = getBoardUniversity.value;


            console.log("Selected Education Level: ", educationLevelValue);
            console.log("Selected Board: ", boardUniversityValue);

            if (!educationLevelValue && !boardUniversityValue) {
                console.log("No education level and board university selected.");
                return;
            }


            if (["PSC/5 Pass", "JSC/8 Pass", "Secondary/O Level"].includes(educationLevelValue)) {
                fetch(`http://localhost:8086/employee/schools?boardName=${boardUniversityValue}`).then(response => response.json())
                    .then(data => {
                        const schoolCollegeDropdown = document.querySelectorAll('.schoolCollegeDropdown');
                        console.log("Length " + newId);
                        schoolCollegeDropdown[newId].innerHTML = '<option value="" disabled selected>Select School</option>';
                        console.log("School: ", data);

                        data.forEach((school) => {
                            debugger
                            const schoolName = school[0];

                            const option = document.createElement('option');
                            option.value = schoolName;
                            option.textContent = schoolName;
                            schoolCollegeDropdown[newId].appendChild(option);
                        })
// Enable the dropdown after populating options
                        schoolCollegeDropdown.disabled = false;
                    })
                    .catch(error => console.error("Error fetching School/College names:", error));
            } else if (educationLevelValue === "Higher Secondary/A Level") {
                fetch(`http://localhost:8086/employee/colleges?boardName=${boardUniversityValue}`).then(response => response.json())
                    .then(data => {
                        const schoolCollegeDropdown = document.querySelectorAll('.schoolCollegeDropdown');
                        console.log("Length " + newId);
                        schoolCollegeDropdown[newId].innerHTML = '<option value="" disabled selected>Select College</option>';
                        console.log("College: ", data);


                        data.forEach((college) => {
                            debugger
                            const collegeName = college[0];
                            const option = document.createElement('option');
                            option.value = collegeName;
                            option.textContent = collegeName;
                            schoolCollegeDropdown[newId].appendChild(option);
                        })
// Enable the dropdown after populating options
                        schoolCollegeDropdown.disabled = false;
                    })
                    .catch(error => console.error("Error fetching School/College names:", error));
            } else {
                console.log("No School/College for this education level");
            }

        }
    </script>

    <!-----------------------------javascript to  increase previous experience row Start--------------------------------------->
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const experienceContainer = document.querySelector(".previousExperienceDetails");

            // Event delegation for dynamic elements
            document.addEventListener("click", function (e) {
                // Add a new row
                if (e.target && e.target.classList.contains("addExperienceRow")) {
                    const experienceRow = experienceContainer.querySelector(".previousExperienceRow");

                    // Clone the first row
                    const newRow = experienceRow.cloneNode(true);

                    // Clear input values in the cloned row
                    newRow.querySelectorAll("input, select").forEach((element) => {
                        if (element.tagName === "SELECT") {
                            element.selectedIndex = 0; // Reset dropdown
                        } else {
                            element.value = ""; // Clear input
                        }
                    });

                    // Update indices in `name`, `id`, and `th:field` attributes
                    const allRows = experienceContainer.querySelectorAll(".previousExperienceRow");
                    const newIndex = allRows.length; // Determine the new index
                    console.log("New row index:", newIndex);

                    newRow.querySelectorAll("[id], [name]").forEach((field) => {
                        // Update the `id` and `name` attributes with the new index
                        if (field.id) {
                            if(field.id.includes('companyBusiness2Show') || field.id.includes('areaDivision2Show')){
                                if(!(field.classList.contains('d-none'))){
                                    field.classList.add('d-none');
                                }
                            }
                            const updatedId = field.id.replace(/\_\d+\_/, `_${newIndex}_`);
                            console.log(`Updating ID from ${field.id} to ${updatedId}`);
                            field.id = updatedId;
                            console.log(field);
                        }
                        if (field.name) {
                            if (field.name.includes('companyBusiness2') || field.name.includes('areaDivision2')) {
                                if(field.required){
                                    field.removeAttribute('required');
                                }
                            }
                            const updatedName = field.name.replace(
                                /\[\d+\]/,
                                `[${newIndex}]`
                            );
                            console.log(
                                `Updating Name from ${field.name} to ${updatedName}`
                            );
                            field.name = updatedName;
                        }
                    });

                    // Modify the button group
                    const buttonGroup = newRow.querySelector(".form-group.col-sm-1.d-flex.align-items-end");
                    buttonGroup.innerHTML = `
                    <button type="button" class="btn btn-success addExperienceRow">+</button>
                    <button type="button" class="btn btn-danger removeExperienceRow" style="margin-left: 5px;">-</button>             `;

                    // Append the cloned row to the container
                    experienceContainer.appendChild(newRow);
                }

                // Remove a row
                if (e.target && e.target.classList.contains("removeExperienceRow")) {
                    const row = e.target.closest(".previousExperienceRow");

                    if (experienceContainer.childElementCount > 1) {
                        row.remove();
                    } else {
                        alert("At least one experience row must remain.");
                    }
                }
            });
        });
    </script>
    <!-----------------------------javascript to  increase previous experience row end--------------------------------------->
    <!--06-02-2025-->
    <script>
        //Passing year dropdown set
        document.addEventListener("DOMContentLoaded", function () {
            const passingYears = document.querySelector(".passingYearDropdown");

            const passingYear = passingYears.dataset.passingyear;

            passingYears.innerHTML = '<option value="" >Select Passing Year</option>';


            //Determine the Current Year.
            const currentYear = (new Date()).getFullYear();


            //Loop and add the Year values to DropDownList.
            for (var i = currentYear; i >= 1950; i--) {
                var option = document.createElement("OPTION");
                option.innerHTML = i;
                option.value = i;
                if (i === Number(passingYear)) {
                    option.setAttribute("selected", "selected");
                }
                passingYears.appendChild(option);
            }
        })


        //Result Type dropdown set
        function getResultType(id) {
            debugger
            const newId = id.match(/\d/g);
            const year = document.getElementById(id).value;

            const levelOfEducation = document.querySelectorAll('.levelOfEducation')[newId];
            const educationValue = levelOfEducation.value;

            console.log("Value of Level of education for result type: "+educationValue);


            fetch(`http://localhost:8086/employee/result-type`).then(response => response.json())
                .then(data => {
                    const resultTypeDropdown = document.querySelectorAll('.resultTypeDropdown');
                    console.log("Length " + newId);
                    resultTypeDropdown[newId].innerHTML = '<option value="" disabled selected>Select Result Type</option>';
                    console.log("Result Type", data);

                    let gpaOrDivision = [];
                    debugger
                    if (year >= 2000) {
                        if
                        (["PSC/5 Pass", "JSC/8 Pass", "Secondary/O Level", "Higher Secondary/A Level"].includes(educationValue)){
                            gpaOrDivision = data.slice(4, 5);
                        } else{
                            gpaOrDivision = data.slice(3, 4);
                        }
                    } else {
                        gpaOrDivision = data.slice(0, 3);
                    }


                    gpaOrDivision.forEach((resultType) => {
                        console.log(resultType);
                        debugger
                        const option = document.createElement('option');
                        option.value = resultType;
                        option.textContent = resultType;
                        resultTypeDropdown[newId].appendChild(option);
                    })
                    // Enable the dropdown after populating options
                    resultTypeDropdown.disabled = false;
                })
                .catch(error => console.error("Error fetching School/College names:", error));

        }


        //View Marks, GPA, CGPA
        function getMarksOrGpaOrCgpa(id) {
            debugger
            const newId = id.match(/\d/g);
            const resultType = document.getElementById(id).value;


            const marks = document.querySelectorAll(".marks");
            const gpa = document.querySelectorAll(".gpa");
            const cgpa = document.querySelectorAll(".cgpa");

            if (!marks[newId].classList.contains('d-none')) {
                marks[newId].classList.add('d-none');
            }

            if (!cgpa[newId].classList.contains('d-none')) {
                cgpa[newId].classList.add('d-none');
            }

            if (!gpa[newId].classList.contains('d-none')) {
                gpa[newId].classList.add('d-none');
            }


            if (["First Division", "Second Division", "Third Division"].includes(resultType)) {
                marks[newId].classList.remove('d-none');
            } else if (resultType === "CGPA") {
                cgpa[newId].classList.remove('d-none');
            } else if (resultType === "GPA") {
                gpa[newId].classList.remove('d-none');
            }
        }
    </script>
    <!--06-02-2025-->

    <!--08-02-2025-->
    <script>

        document.addEventListener("DOMContentLoaded", function () {
            getCountry();
        });


        function getCountry() {

            fetch(`http://localhost:8086/employee/country`).then(response => response.json())
                .then(countries => {
                    const countryDropdownAll = document.querySelectorAll('.countryDropdown');
                    console.log(countryDropdownAll);
                    countryDropdownAll.forEach(countryDropdown => {

                        const optionTag2 = document.querySelector(`${countryDropdown}>option:nth-child(2)`);
                        optionTag2.innerHTML = '<option value=""  selected>Select Country</option>';

                        countries.forEach((country) => {
                            debugger
                            const option = document.createElement('option');
                            option.value = country;
                            option.textContent = country;
                            optionTag2.appendChild(option);
                        });
                        // Enable the dropdown after populating options
                        countryDropdown.disabled = false;
                    })
                    console.log(`Select countries ${countries}`);


                })
                .catch(error => console.error("Error fetching Country:", error));
        }


        //Permanent Address
        function getDivision(id) {
            const selectedId = document.getElementById(id);
            const countryName = selectedId.value;

            fetch(`http://localhost:8086/employee/division?countryName=${countryName}`)
                .then(response => response.json())
                .then(divisions => {
                    const divisionDropdown = document.querySelector('.divisionDropdown');
                    divisionDropdown.innerHTML = '<option value="" disabled selected>Select Division</option>';
                    console.log("Divisions: ", divisions);

                    divisions.forEach(division => {
                        const option = document.createElement('option');
                        option.value = division;
                        option.textContent = division;
                        divisionDropdown.appendChild(option);
                    });

                    // Enable the dropdown after populating options
                    divisionDropdown.disabled = false;
                })
                .catch(error => console.error("Error fetching division:", error));
        }

        function getDistrict(id) {
            const selectedId = document.getElementById(id);
            const divisionName = selectedId.value;

            fetch(`http://localhost:8086/employee/district?divisionName=${divisionName}`)
                .then(response => response.json())
                .then(distrcts => {
                    const districtDropdown = document.querySelector('.districtDropdown');
                    districtDropdown.innerHTML = '<option value="" disabled selected>Select District</option>';
                    console.log("Districts: ", distrcts);

                    distrcts.forEach(distrct => {
                        const option = document.createElement('option');
                        option.value = distrct;
                        option.textContent = distrct;
                        districtDropdown.appendChild(option);
                    });

                    // Enable the dropdown after populating options
                    districtDropdown.disabled = false;
                })
                .catch(error => console.error("Error fetching distrct:", error));
        }

        function getThana(id) {
            const selectedId = document.getElementById(id);
            const districtName = selectedId.value;

            fetch(`http://localhost:8086/employee/thana?districtName=${districtName}`)
                .then(response => response.json())
                .then(thanas => {
                    const thanaDropdown = document.querySelector('.thanaDropdown');
                    thanaDropdown.innerHTML = '<option value="" disabled selected>Select Thana</option>';
                    console.log("Thanas: ", thanas);

                    thanas.forEach(thana => {
                        debugger
                        const option = document.createElement('option');
                        option.value = thana;
                        option.textContent = thana;
                        thanaDropdown.appendChild(option);
                    });

                    // Enable the dropdown after populating options
                    thanaDropdown.disabled = false;
                })
                .catch(error => console.error("Error fetching thana:", error));
        }

        function getPostOffice(id) {
            const selectedId = document.getElementById(id);
            const thanaName = selectedId.value;

            fetch(`http://localhost:8086/employee/post-office?thanaName=${thanaName}`)
                .then(response => response.json())
                .then(postOffices => {
                    const postOfficeDropdown = document.querySelector('.postOfficeDropdown');
                    postOfficeDropdown.innerHTML = '<option value="" disabled selected>Select Post Office</option>';
                    console.log("Post-Offices: ", postOffices);

                    postOffices.forEach(postOffice => {
                        debugger
                        const option = document.createElement('option');
                        option.value = postOffice;
                        option.textContent = postOffice;
                        postOfficeDropdown.appendChild(option);
                    });
                    // Enable the dropdown after populating options
                    postOfficeDropdown.disabled = false;
                })
                .catch(error => console.error("Error fetching post-offices:", error));
        }

        //Permanent Address

        //Present Address
        function getPresentDivision(id) {
            const selectedId = document.getElementById(id);
            const countryName = selectedId.value;

            fetch(`http://localhost:8086/employee/division?countryName=${countryName}`)
                .then(response => response.json())
                .then(divisions => {
                    const divisionDropdown = document.querySelector('.presentDivisionDropdown');
                    divisionDropdown.innerHTML = '<option value="" disabled selected>Select Division</option>';
                    console.log("Divisions: ", divisions);

                    divisions.forEach(division => {
                        const option = document.createElement('option');
                        option.value = division;
                        option.textContent = division;
                        divisionDropdown.appendChild(option);
                    });

                    // Enable the dropdown after populating options
                    divisionDropdown.disabled = false;
                })
                .catch(error => console.error("Error fetching division:", error));
        }

        function getPresentDistrict(id) {
            const selectedId = document.getElementById(id);
            const divisionName = selectedId.value;

            fetch(`http://localhost:8086/employee/district?divisionName=${divisionName}`)
                .then(response => response.json())
                .then(distrcts => {
                    const districtDropdown = document.querySelector('.presentDistrictDropdown');
                    districtDropdown.innerHTML = '<option value="" disabled selected>Select District</option>';
                    console.log("Districts: ", distrcts);

                    distrcts.forEach(distrct => {
                        const option = document.createElement('option');
                        option.value = distrct;
                        option.textContent = distrct;
                        districtDropdown.appendChild(option);
                    });

                    // Enable the dropdown after populating options
                    districtDropdown.disabled = false;
                })
                .catch(error => console.error("Error fetching distrct:", error));
        }

        function getPresentThana(id) {
            const selectedId = document.getElementById(id);
            const districtName = selectedId.value;

            fetch(`http://localhost:8086/employee/thana?districtName=${districtName}`)
                .then(response => response.json())
                .then(thanas => {
                    const thanaDropdown = document.querySelector('.presentThanaDropdown');
                    thanaDropdown.innerHTML = '<option value="" disabled selected>Select Thana</option>';
                    console.log("Thanas: ", thanas);

                    thanas.forEach(thana => {
                        debugger
                        const option = document.createElement('option');
                        option.value = thana;
                        option.textContent = thana;
                        thanaDropdown.appendChild(option);
                    });

                    // Enable the dropdown after populating options
                    thanaDropdown.disabled = false;
                })
                .catch(error => console.error("Error fetching thana:", error));
        }

        function getPresentPostOffice(id) {
            const selectedId = document.getElementById(id);
            const thanaName = selectedId.value;

            fetch(`http://localhost:8086/employee/post-office?thanaName=${thanaName}`)
                .then(response => response.json())
                .then(postOffices => {
                    const postOfficeDropdown = document.querySelector('.presentPostOfficeDropdown');
                    postOfficeDropdown.innerHTML = '<option value="" disabled selected>Select Post Office</option>';
                    console.log("Post-Offices: ", postOffices);

                    postOffices.forEach(postOffice => {
                        debugger
                        const option = document.createElement('option');
                        option.value = postOffice;
                        option.textContent = postOffice;
                        postOfficeDropdown.appendChild(option);
                    });
                    // Enable the dropdown after populating options
                    postOfficeDropdown.disabled = false;
                })
                .catch(error => console.error("Error fetching post-offices:", error));
        }

        //Present Address


        //Contact Address
        function getContactDivision(id) {
            const selectedId = document.getElementById(id);
            const countryName = selectedId.value;


            fetch(`http://localhost:8086/employee/division?countryName=${countryName}`)
                .then(response => response.json())
                .then(divisions => {
                    const divisionDropdown = document.querySelector('.contactDivisionDropdown');
                    divisionDropdown.innerHTML = '<option value="" disabled selected>Select Division</option>';
                    console.log("Divisions: ", divisions);

                    divisions.forEach(division => {
                        const option = document.createElement('option');
                        option.value = division;
                        option.textContent = division;
                        divisionDropdown.appendChild(option);
                    });

                    // Enable the dropdown after populating options
                    divisionDropdown.disabled = false;
                })
                .catch(error => console.error("Error fetching division:", error));
        }

        function getContactDistrict(id) {
            const selectedId = document.getElementById(id);
            const divisionName = selectedId.value;

            fetch(`http://localhost:8086/employee/district?divisionName=${divisionName}`)
                .then(response => response.json())
                .then(distrcts => {
                    const districtDropdown = document.querySelector('.contactDistrictDropdown');
                    districtDropdown.innerHTML = '<option value="" disabled selected>Select District</option>';
                    console.log("Districts: ", distrcts);

                    distrcts.forEach(distrct => {
                        const option = document.createElement('option');
                        option.value = distrct;
                        option.textContent = distrct;
                        districtDropdown.appendChild(option);
                    });

                    // Enable the dropdown after populating options
                    districtDropdown.disabled = false;
                })
                .catch(error => console.error("Error fetching distrct:", error));
        }

        function getContactThana(id) {
            const selectedId = document.getElementById(id);
            const districtName = selectedId.value;

            fetch(`http://localhost:8086/employee/thana?districtName=${districtName}`)
                .then(response => response.json())
                .then(thanas => {
                    const thanaDropdown = document.querySelector('.contactThanaDropdown');
                    thanaDropdown.innerHTML = '<option value="" disabled selected>Select Thana</option>';
                    console.log("Thanas: ", thanas);

                    thanas.forEach(thana => {
                        debugger
                        const option = document.createElement('option');
                        option.value = thana;
                        option.textContent = thana;
                        thanaDropdown.appendChild(option);
                    });

                    // Enable the dropdown after populating options
                    thanaDropdown.disabled = false;
                })
                .catch(error => console.error("Error fetching thana:", error));
        }

        function getContactPostOffice(id) {
            const selectedId = document.getElementById(id);
            const thanaName = selectedId.value;

            fetch(`http://localhost:8086/employee/post-office?thanaName=${thanaName}`)
                .then(response => response.json())
                .then(postOffices => {
                    const postOfficeDropdown = document.querySelector('.contactPostOfficeDropdown');
                    postOfficeDropdown.innerHTML = '<option value="" disabled selected>Select Post Office</option>';
                    console.log("Post-Offices: ", postOffices);

                    postOffices.forEach(postOffice => {
                        debugger
                        const option = document.createElement('option');
                        option.value = postOffice;
                        option.textContent = postOffice;
                        postOfficeDropdown.appendChild(option);
                    });
                    // Enable the dropdown after populating options
                    postOfficeDropdown.disabled = false;
                })
                .catch(error => console.error("Error fetching post-offices:", error));
        }

        //Contactt Address


    </script>
    <!--08-02-2025-->


<!--    19-02-2025-->
    <!-----------------------------javascript to change is alive value and  present address and contact and checked--------------------------------------->
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            document.addEventListener("click", function (e) {
                // Handle  is alive value
                if (e.target && e.target.id === 'family_0_isAlive') {
                    debugger
                    const isAlive = document.querySelector("#family_0_isAlive");
                    console.log(isAlive.value);
                    console.log(isAlive.value);
                    if (isAlive.value === 'false') {
                        isAlive.value = 'true';
                        console.log(isAlive.value);
                        console.log("Checked");
                    } else if (isAlive.value === 'true') {
                        isAlive.value = 'false';
                        console.log(isAlive.value);
                        console.log("Unchecked");

                    } else {
                        console.log("UncheckedNull");
                    }
                }

                // Handle  defaultCheck1 value for present address
                if (e.target && e.target.id === 'defaultCheck1') {
                    debugger
                    const defaultCheck1 = document.querySelector("#defaultCheck1");
                    const presentAddressRow = document.querySelector("#presentAddressRow");
                    console.log(defaultCheck1.value);
                    console.log(presentAddressRow.classList);
                    if (defaultCheck1.value === 'false') {
                        defaultCheck1.value = 'true';
                        presentAddressRow.classList.add("d-none");
                        console.log(defaultCheck1.value);
                    } else if (defaultCheck1.value === 'true') {
                        defaultCheck1.value = 'false';
                        presentAddressRow.classList.remove("d-none");
                        console.log(defaultCheck1.value);
                    } else {
                        console.log(defaultCheck1.value + "UncheckedNull");
                    }
                }

                // Handle  defaultCheck2 value for contact address
                if (e.target && e.target.id === 'defaultCheck2') {
                    debugger
                    const defaultCheck2 = document.querySelector("#defaultCheck2");
                    const contactAddressRow = document.querySelector("#contactAddressRow");
                    console.log(defaultCheck2.value);
                    console.log(contactAddressRow.classList);
                    if (defaultCheck2.value === 'false') {
                        defaultCheck2.value = 'true';
                        contactAddressRow.classList.add("d-none");
                        console.log(defaultCheck2.value);
                        console.log(contactAddressRow.classList);
                    } else if (defaultCheck2.value === 'true') {
                        defaultCheck2.value = 'false';
                        contactAddressRow.classList.remove("d-none");
                        console.log(defaultCheck2.value);
                        console.log(contactAddressRow.classList);
                    } else {
                        console.log(defaultCheck2.value + "UncheckedNull");
                    }
                }
            });
        });
    </script>
    <!-----------------------------javascript to change is alive value and checked--------------------------------------->

    <!-----------------------------javascript to change date--------------------------------------->
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            document.addEventListener("change", function (e) {
                // Handle  to show nid, brc or marriage certificate
                if (e.target && e.target.id === 'family_0_dateOfBirth') {
                    debugger

                    const marriageCertificate = document.querySelector("#marriageCertificate");
                    const brcDocument = document.querySelector("#brcDocument");
                    const nidDocumentOfRelationType = document.querySelector("#nidDocumentOfRelationType");

                    const age = getAge("family_0_dateOfBirth");
                    console.log("Age: " + age);

                    const relationType = getSelectedValue();
                    console.log(relationType);


                    if ( !marriageCertificate.classList.contains('d-none') ){
                        marriageCertificate.classList.add('d-none');
                    }

                    if ( !brcDocument.classList.contains('d-none') ){
                        brcDocument.classList.add('d-none');
                    }

                    if ( !nidDocumentOfRelationType.classList.contains('d-none') ){
                        nidDocumentOfRelationType.classList.add('d-none');
                    }


                    if (relationType === 'spouse') {
                        marriageCertificate.classList.remove('d-none');

                        if (age >= 0 && age < 18) {
                            brcDocument.classList.remove('d-none');
                        } else {
                            nidDocumentOfRelationType.classList.remove('d-none');
                        }
                    } else if (relationType === 'son') { // son
                        if (age > 18) {
                            nidDocumentOfRelationType.classList.remove('d-none');
                        } else {
                            brcDocument.classList.remove('d-none');
                        }
                    } else if (relationType === 'daughter') {
                        if (age > 18) {
                            nidDocumentOfRelationType.classList.remove('d-none');
                        } else {
                            brcDocument.classList.remove('d-none');
                        }
                    }
                }

                //Find age from date of birth
                function getAge(x) {
                    const y = document.getElementById(x).value;
                    const dob = new Date(y);
                    const month_diff = Date.now() - dob.getTime();
                    const age_dt = new Date(month_diff);
                    const year = age_dt.getUTCFullYear();
                    return Math.abs(year - 1970);
                }

                //Get selected value from dropdown of relation type
                function getSelectedValue() {
                    const familyRow = document.getElementsByClassName('familyRow');
                    const relationType = familyRow[0].childNodes[1];
                    const selected = relationType.childNodes[3];
                    return selected.options[selected.selectedIndex].value;
                }
            });
        });
    </script>
    <!-----------------------------javascript to change date--------------------------------------->
    <!--    19-02-2025-->

    <!--22-02-2025-->
    <script>
        function removeValue(id){
            const familyRow = document.querySelector('.familyRow')

            familyRow.querySelectorAll("input, select").forEach((element) => {
                if(!(element.id === id)){
                    if (element.tagName === "SELECT") {
                        element.selectedIndex = 0; // Reset dropdown
                    } else {
                        if(!(element.type === 'checkbox')){
                            element.value = ""; // Clear input
                        }
                    }
                }
            });
        }


        //06 March, 2025
        //Show other company name
        function companyBusiness2Show(id){
            const selectIdElement = document.getElementById(id);
            const newId = id.match(/\d/g);

            const companyBusiness2Id = id.includes('areaDivision') ? `experience_${newId}_areaDivision2Show` :
                `experience_${newId}_companyBusiness2Show`;
            const companyBusiness2Element = document.getElementById(companyBusiness2Id);



            if(selectIdElement.value === 'others'){
                companyBusiness2Element.classList.remove('d-none');
                companyBusiness2Element.querySelector('input').setAttribute('required', true);
            } else{
                if(!(companyBusiness2Element.classList.contains('d-none'))){
                    companyBusiness2Element.classList.add('d-none');
                    companyBusiness2Element.querySelector('input').removeAttribute('required');
                }


            }
        }
    </script>
    <!--22-02-2025-->

</th:block>
</body>
</html>

